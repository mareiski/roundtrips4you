(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{5236:function(t,e,n){},7810:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.isRTEditMode?"":"q-px-lg q-pb-md",style:t.isRTEditMode?"":"padding-top:20px;",attrs:{id:"roundtripWizard"}},[null!==t.user?n("div",{staticClass:"edit-btn-container",staticStyle:{position:"fixed","z-index":"101",right:"0",padding:"10px"}},[t.$route.params.id?n("q-btn",{attrs:{round:"",color:"primary",icon:"visibility"},on:{click:function(e){return t.$router.push("/rundreise-ansehen/"+t.$route.params.id)}}},[n("q-tooltip",[t._v("Reise ansehen")])],1):t._e()],1):t._e(),n("q-dialog",{attrs:{persistent:""},model:{value:t.showCancelDialog,callback:function(e){t.showCancelDialog=e},expression:"showCancelDialog"}},[n("q-card",{staticStyle:{"min-width":"350px"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("Ungesicherte Änderungen")]),n("span",[t._v("Wenn du jetzt zurück gehst werden deine Änderungen verworfen! "),n("br"),t._v(" Möchtest du trotzdem zurück?")])]),n("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Änderungen verwerfen",flat:""},on:{click:function(e){t.cancelDialogNext(),t.$store.commit("demoSession/resetRoundtrip")}}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{type:"submit",label:"Abbrechen",flat:""}})],1)],1)],1),t.$store.getters["demoSession/isInDemoSession"]?t._e():n("div",{staticStyle:{"margin-bottom":"20px"}},[n("a",{directives:[{name:"show",rawName:"v-show",value:!t.isRTEditMode,expression:"!isRTEditMode"}],on:{click:function(e){return t.$router.push("/meine-rundreisen")}}},[n("q-icon",{attrs:{name:"keyboard_arrow_left"}}),t._v("\n      meine Rundreisen\n    ")],1)]),t.isRTEditMode?n("div",[n("TripOverview",{ref:"tripOverview",attrs:{addedStops:t.addedStops,currentRoundtrip:t.currentRoundtrip,isEditMode:t.isRTEditMode},on:{stopsDragged:function(e){return t.onStopsDragged(e)},editStop:function(e){return t.editStop(e)},removeStop:function(e){return t.removeStop(e)},addStop:function(e){return t.handleAddStopFromMap(e)},update:function(e){return t.updateFromSuggestedCity(e)},distanceUpdate:function(e){return t.updateTotalTripDistance(e)},addSight:function(e){return t.addSightFromMap(e)}}}),n("div",{staticClass:"sticky-navigation",staticStyle:{"justify-content":"space-between"}},[n("span",[t._v(t._s(t.totalTripDistance)+" km, "+t._s(t.totalTripDuration)+" Tag(e)")]),n("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:t.unsavedChanges?t.isRTEditMode?"Reise speichern":"Reise fertigstellen":"Reise ansehen",loading:t.saving},on:{click:function(e){t.unsavedChanges?t.createTrip(!1):t.$router.push("/rundreise-ansehen/"+t.$route.params.id)}}})],1)],1):n("q-stepper",{ref:"stepper",attrs:{"header-nav":"",color:"primary",contracted:t.isMobile,animated:"","keep-alive":""},scopedSlots:t._u([{key:"navigation",fn:function(){return[n("div",{staticStyle:{height:"80px"}})]},proxy:!0},{key:"message",fn:function(){return[n("div",{staticClass:"sticky-navigation",style:t.isRTEditMode?"":"top: 93vh;"},[n("q-stepper-navigation",{staticClass:"flex justify-end"},[1===t.step?[n("q-btn",{attrs:{color:"primary",disable:!t.currentRoundtrip.Title||!t.currentRoundtrip.Rooms||!t.currentRoundtrip.Adults||t.isTitleInUse,label:"weiter"},on:{click:function(e){t.step=2,t.unsavedChanges=!0}}})]:2===t.step?[n("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Zurück"},on:{click:function(e){t.step=1}}}),n("q-btn",{attrs:{color:"primary",disable:"Reisemittel wählen"===t.currentRoundtrip.TransportProfile||"Flugzeug"===t.currentRoundtrip.TransportProfile&&(!t.currentRoundtrip.TransportProfile||!t.currentRoundtrip.Origin||!t.currentRoundtrip.Destination||!t.currentRoundtrip.DepatureDate||!t.currentRoundtrip.ReturnDate||!t.currentRoundtrip.TravelClass||!t.currentRoundtrip.NonStop),label:"Weiter"},on:{click:function(e){t.step=3,t.unsavedChanges=!0}}})]:3===t.step?[n("div",{staticClass:"flex justfiy-between"},[n("div",{staticClass:"flex justify-center",staticStyle:{"flex-direction":"column"}},[n("span",[t._v(t._s(t.totalTripDistance)+" km, "+t._s(t.totalTripDuration)+" Tag(e)")])]),n("div",[t.isRTEditMode?t._e():n("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"zurück"},on:{click:function(e){t.step=2}}}),n("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",disable:t.addedStops.length<=1,label:t.unsavedChanges?t.isRTEditMode?"Reise speichern":"Reise fertigstellen":"Reise ansehen",loading:t.saving},on:{click:function(e){t.unsavedChanges?t.createTrip(!1):t.$router.push("/rundreise-ansehen/"+t.$route.params.id)}}})],1)])]:t._e()],2)],1)]},proxy:!0}],null,!1,1523488581),model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[t.isRTEditMode?t._e():n("q-step",{attrs:{name:1,title:"Allgemeine Infos",icon:"settings",done:t.step>1,"header-nav":t.step>1}},[n("q-input",{ref:"titleInput",attrs:{rules:[function(t){return null!==t&&""!==t||"Bitte gib einen Titel an"},function(e){return t.isUniqueTitle(e)},function(t){return" "!==t[0]||"Das erste Zeichen kann kein Leerzeichen sein"}],label:"Titel",outlined:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"title"}})]},proxy:!0}],null,!1,490390316),model:{value:t.currentRoundtrip.Title,callback:function(e){t.$set(t.currentRoundtrip,"Title",e)},expression:"currentRoundtrip.Title"}}),n("div",[n("p",[t._v("Die folgenden Infos benötigen wir, um bei der Hotelsuche bereits alle Daten für dich einzugeben. "),n("br"),t._v(" Du kannst dies auch später noch ändern")]),n("q-input",{attrs:{label:"Zimmer",type:"number",rules:[function(t){return null!==t&&""!==t&&t>0||"Bitte gib eine Zimmeranzahl an"}],outlined:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"house"}})]},proxy:!0}],null,!1,2617713096),model:{value:t.currentRoundtrip.Rooms,callback:function(e){t.$set(t.currentRoundtrip,"Rooms",e)},expression:"currentRoundtrip.Rooms"}}),n("q-input",{attrs:{label:"Erwachsene",type:"number",rules:[function(t){return null!==t&&""!==t&&t>0||"Bitte gib die Anzahl der Erwachsenen Reisenden an"},function(e){return e<=9*parseInt(t.currentRoundtrip.Rooms)||"Bitte wähle mehr Zimmer"}],outlined:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"group"}})]},proxy:!0}],null,!1,1028831827),model:{value:t.currentRoundtrip.Adults,callback:function(e){t.$set(t.currentRoundtrip,"Adults",e)},expression:"currentRoundtrip.Adults"}}),n("q-input",{attrs:{label:"Kinder",type:"number",rules:[function(t){return null!==t&&""!==t&&t>=0&&t<=20||"Bitte gib die Anzahl der Kinder auf der Reise an"}],outlined:""},on:{input:function(e){t.currentRoundtrip.ChildrenAges.length=parseInt(t.currentRoundtrip.ChildrenAges)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"child_friendly"}})]},proxy:!0}],null,!1,1135801950),model:{value:t.currentRoundtrip.Children,callback:function(e){t.$set(t.currentRoundtrip,"Children",e)},expression:"currentRoundtrip.Children"}}),parseInt(t.currentRoundtrip.Children)>0&&parseInt(t.currentRoundtrip.Children)<=20?n("div",{staticClass:"flex justify-center",staticStyle:{margin:"auto","margin-top":"20px"}},t._l(parseInt(t.currentRoundtrip.Children),(function(e){return n("q-input",{key:e,staticStyle:{"margin-right":"10px"},attrs:{label:"Alter Kind "+e,type:"number",rules:[function(t){return null!==t&&""!==t&&t>0||"Bitte gib das Alter des Kindes an"}],outlined:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"child_friendly"}})]},proxy:!0}],null,!0),model:{value:t.currentRoundtrip.ChildrenAges[e-1],callback:function(n){t.$set(t.currentRoundtrip.ChildrenAges,e-1,n)},expression:"currentRoundtrip.ChildrenAges[childNum - 1]"}})})),1):t._e()],1),n("p",[t._v("Wenn du das genaue Datum noch nicht weißt, kannst du es auch später noch ändern.")]),n("q-input",{staticClass:"input-item",attrs:{filled:"","error-message":"Bitte gib ein richtiges Datum an",error:!t.isDateTimeValid(),"lazy-rules":"","bottom-slots":"",outlined:"",label:"Startdatum"},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{"today-btn":"",mask:"DD.MM.YYYY HH:mm"},model:{value:t.currentStop.InitDate,callback:function(e){t.$set(t.currentStop,"InitDate",e)},expression:"currentStop.InitDate"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"DD.MM.YYYY HH:mm",format24h:""},model:{value:t.currentStop.InitDate,callback:function(e){t.$set(t.currentStop,"InitDate",e)},expression:"currentStop.InitDate"}})],1)],1)]},proxy:!0}],null,!1,1420779139),model:{value:t.currentStop.InitDate,callback:function(e){t.$set(t.currentStop,"InitDate",e)},expression:"currentStop.InitDate"}})],1),t.isRTEditMode?t._e():n("q-step",{attrs:{name:2,title:"An-/Abreise",icon:"flight",done:t.step>2,"header-nav":t.step>2}},[t.currentRoundtrip.DepatureDate?n("ArrivalDeparture",{attrs:{currentRoundtrip:t.currentRoundtrip,startDate:t.currentStop.InitDate.split(" ")[0]},on:{updateArrivalDeparture:function(e){return t.updateArrivalDeparture(e)}}}):t._e()],1),n("q-step",{attrs:{name:3,title:"Reise erstellen",icon:"place",done:t.step>3,"header-nav":t.step>3}},[n("TripOverview",{ref:"tripOverview",attrs:{addedStops:t.addedStops,currentRoundtrip:t.currentRoundtrip,isEditMode:t.isRTEditMode},on:{stopsDragged:function(e){return t.onStopsDragged(e)},editStop:function(e){return t.editStop(e)},removeStop:function(e){return t.removeStop(e)},addStop:function(e){return t.handleAddStopFromMap(e)},update:function(e){return t.updateFromSuggestedCity(e)},distanceUpdate:function(e){return t.updateTotalTripDistance(e)},addSight:function(e){return t.addSightFromMap(e)}}})],1)],1),n("q-dialog",{staticClass:"bg-white",model:{value:t.showAddStopDialog,callback:function(e){t.showAddStopDialog=e},expression:"showAddStopDialog"}},[n("q-card",[n("q-card-section",[n("q-input",{staticStyle:{"font-family":"Raleway","font-size":"1.25rem"},attrs:{rules:[function(t){return null!==t&&""!==t||"Bitte gib einen Titel an"}],autofocus:"",label:"Titel","label-color":"secondary",filled:"","lazy-rules":""},model:{value:t.currentStop.Title,callback:function(e){t.$set(t.currentStop,"Title",e)},expression:"currentStop.Title"}}),n("q-input",{attrs:{type:"number",filled:"",label:"Dauer in Tagen",rules:[function(t){return""!==t&&t>=0||"Bitte gib eine Anzahl von Tagen ein"}],"lazy-rules":""},model:{value:t.currentStop.DayDuration,callback:function(e){t.$set(t.currentStop,"DayDuration",t._n(e))},expression:"currentStop.DayDuration"}}),n("div",{staticStyle:{"margin-bottom":"20px"}},[n("span",[t._v("Ankunftszeit:")]),n("span",{staticClass:"cursor-pointer font-medium"},[t._v("\n            "+t._s(t.currentStop.InitDate.split(" ")[1])+"\n            "),n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}}),n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"DD.MM.YYYY HH:mm",format24h:""},model:{value:t.currentStop.InitDate,callback:function(e){t.$set(t.currentStop,"InitDate",e)},expression:"currentStop.InitDate"}},[n("div",{staticClass:"row items-center justify-end"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fertig",color:"primary",flat:""}})],1)])],1)],1)])],1),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Abbrechen"}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",disable:!t.currentStop.Title&&t.currentStop.DayDuration<=0,label:"hinzufügen"},on:{click:function(){t.addStop(!0)}}})],1)],1)],1),n("q-dialog",{attrs:{persistent:""},model:{value:t.showEditStopDialog,callback:function(e){t.showEditStopDialog=e},expression:"showEditStopDialog"}},[n("q-card",{attrs:{id:"editStopDialogCard"}},[n("q-card-section",[n("q-input",{staticStyle:{"font-family":"Raleway","font-size":"1.25rem"},attrs:{rules:[function(t){return null!==t&&""!==t||"Bitte gib einen Titel an"}],autofocus:"",label:"Titel","label-color":"secondary",filled:"","lazy-rules":""},model:{value:t.currentStop.Title,callback:function(e){t.$set(t.currentStop,"Title",e)},expression:"currentStop.Title"}}),n("q-input",{attrs:{type:"number",filled:"",label:"Dauer in Tagen",rules:[function(t){return null!==t&&""!==t&&t>=0||"Bitte gib eine Anzahl von Tagen ein"}],"lazy-rules":""},model:{value:t.currentStop.DayDuration,callback:function(e){t.$set(t.currentStop,"DayDuration",t._n(e))},expression:"currentStop.DayDuration"}}),n("div",{staticStyle:{"margin-bottom":"20px"}},[n("span",[t._v("Ankunft:")]),n("span",{staticClass:"cursor-pointer font-medium"},[t._v("\n            "+t._s(t.currentStop.InitDate.split(" ")[1])+"\n            "),n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}}),n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"DD.MM.YYYY HH:mm",format24h:""},model:{value:t.currentStop.InitDate,callback:function(e){t.$set(t.currentStop,"InitDate",e)},expression:"currentStop.InitDate"}},[n("div",{staticClass:"row items-center justify-end"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fertig",color:"primary",flat:""}})],1)])],1)],1)]),n("q-select",{staticClass:"input-item",attrs:{outlined:"",options:["zu Fuß","Fahrrad","Auto"],label:"Reisemittel ab Ort","use-input":"",rules:[function(t){return null!==t&&""!==t||"Bitte wähle ein Reisemittel"}]},on:{input:function(e){return t.getGeneralProfile()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"commute"}})]},proxy:!0}]),model:{value:t.inputProfile,callback:function(e){t.inputProfile=e},expression:"inputProfile"}}),t.currentStop.HotelName?t._e():n("div",{staticStyle:{"margin-bottom":"30px"}},[n("q-btn",{attrs:{size:"20",icon:"add"},on:{click:function(e){t.addHotel=!0}}},[t._v("Hotel hinzufügen\n          ")])],1),n("div",{staticStyle:{"margin-bottom":"20px"}},[t.currentStop.HotelName?n("q-list",{staticClass:"rounded-borders",attrs:{bordered:"",padding:"",dense:""}},[n("q-item",{staticClass:"hotel-list"},[n("q-item-section",{attrs:{avatar:"",top:""}},[n("q-avatar",{attrs:{color:"secondary","text-color":"white","font-size":"20px",icon:"hotel"}})],1),n("q-item-section",[n("q-item-label",{staticClass:"flex",staticStyle:{"flex-wrap":"wrap","white-space":"normal"},attrs:{lines:"2"}},[n("span",{staticStyle:{"padding-right":"5px"}},[t._v(t._s(t.capitalize(t.currentStop.HotelName)))]),t.currentStop.HotelStars&&!isNaN(t.currentStop.HotelStars)?n("q-rating",{staticClass:"stars",staticStyle:{"margin-right":"10px","padding-right":"5px"},attrs:{readonly:"",size:"15px",color:"gold"},model:{value:t.hotelStars,callback:function(e){t.hotelStars=e},expression:"hotelStars"}}):t._e(),n("div",{staticClass:"flex",staticStyle:{"flex-wrap":"wrap","white-space":"normal"}},[t.currentStop.GuestRating?n("span",{staticClass:"raleway"},[t._v("\n                      "+t._s(t.currentStop.GuestRating)+", \n                    ")]):t._e(),t.currentStop.HotelPrice?n("span",[n("span",{staticClass:"raleway"},[t._v("ca. € ")]),n("span",{staticClass:"raleway"},[t._v(t._s(t.currentStop.HotelPrice))]),n("q-tooltip",[t._v("ungefährer Durchschnittspreis pro Person & Nacht")])],1):t._e()])],1),n("q-item-label",{staticStyle:{overflow:"hidden"},attrs:{caption:""}},[n("a",{staticClass:"ellipsis",on:{click:function(e){t.openInNewTab("https://www.google.com/maps/search/?api=1&query="+t.capitalize(t.hotelName+", "+t.hotelLocation.label))}}},[t._v(t._s(t.currentStop.HotelLocation&&"undefined"!==typeof t.currentStop.HotelLocation&&t.currentStop.HotelLocation.label&&"undefined"!==typeof t.currentStop.HotelLocation.label?t.capitalize(t.currentStop.HotelLocation.label):"kein Ort angegeben"))])])],1),n("q-item-section",[t.currentStop.TransportLocations&&t.currentStop.TransportLocations.lenght>0?n("q-btn",{staticStyle:{width:"150px"},on:{click:function(e){t.showTransportDialog=!0}}},[t._v("Transport\n                ")]):t._e()],1),n("q-dialog",{model:{value:t.showTransportDialog,callback:function(e){t.showTransportDialog=e},expression:"showTransportDialog"}},[n("q-card",[n("q-card-section",{staticClass:"row items-center flex",staticStyle:{"flex-direction":"column"}},[n("q-list",t._l(t.currentStop.TransportLocations,(function(e){return n("div",{key:e,staticClass:"flex",staticStyle:{"flex-direction":"column"}},t._l(e.locations,(function(i){return n("q-item",{key:i,attrs:{clickable:""},on:{click:function(e){return t.openInNewTab("https://www.google.com/maps/search/?api=1&query="+i.name)}}},[n("q-item-section",[n("span",[n("q-icon",{attrs:{name:t.getHotelTransportationIcon(e.category)}}),n("span",[t._v(t._s(i.name))])],1),n("p",[t._v(t._s(i.distanceInTime))])])],1)})),1)})),0)],1),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"}})],1)],1)],1),n("q-item-section",{attrs:{side:""}},[t.currentStop.GeneralTempLink&&t.currentStop.GeneralTempLink.length>0?n("div",[n("q-chip",{staticClass:"linkChip",attrs:{icon:"link",dense:"",clickable:""},on:{click:function(e){return t.openInNewTab(t.currentStop.GeneralTempLink)}}},[t._v("Hotelwebsite")])],1):t._e(),t.currentStop.HotelName&&"undefined"!==typeof t.currentStop.HotelName?n("q-chip",{staticClass:"linkChip",staticStyle:{width:"117px"},attrs:{icon:"launch",dense:"",clickable:""},on:{click:function(e){t.openInNewTab("https://www.booking.com/searchresults.de.html?ss="+t.capitalize(t.currentStop.HotelName)+"&checkin_year="+t.date.split(" ")[0].split(".")[2]+"&checkin_month="+t.date.split(".")[1]+"&checkin_monthday="+t.date.split(".")[0]+"&checkout_year="+t.currentStop.CheckOutDate.split(".")[2]+"&checkout_month="+t.currentStop.CheckOutDate.split(".")[1]+"&checkout_monthday="+t.currentStop.CheckOutDate.split(".")[0]+"&group_adults="+t.adults+t.getChildrenText()+"&no_rooms="+t.rooms+"&ac_langcode=de")}}},[t._v(" booking.com\n                  "),n("q-tooltip",[t._v("Hotel auf booking.com")])],1):t._e(),t.currentStop.HotelName&&"undefined"!==typeof t.currentStop.HotelName?n("q-chip",{staticClass:"linkChip",staticStyle:{width:"117px"},attrs:{icon:"launch",dense:"",clickable:""},on:{click:function(e){t.openInNewTab("https://www.expedia.de/Hotel-Search?adults="+t.adults+"children="+t.getExpediaChildrenText()+"%2C1_3&destination="+t.capitalize(t.currentStop.HotelName)+"&endDate="+t.currentStop.CheckOutDate.split(" ")[0].split(".")[2]+"-"+t.currentStop.CheckOutDate.split(".")[1]+"-"+t.currentStop.CheckOutDate.split(".")[0]+"&rooms="+t.rooms+"&sort=RECOMMENDED&startDate="+t.date.split(" ")[0].split(".")[2]+"-"+t.date.split(".")[1]+"-"+t.date.split(".")[0]+"&theme=&useRewards=true")}}},[t._v(" expedia\n                  "),n("q-tooltip",[t._v("Hotel auf expedia")])],1):t._e()],1),t.currentStop.HotelContact&&"undefined"!==typeof t.currentStop.HotelContact?n("q-item-section",{attrs:{side:""}},[n("div",{staticClass:"hotel-contact"},[t.currentStop.HotelContact.email&&"undefined"!==typeof t.currentStop.HotelContact.email?n("q-chip",{attrs:{icon:"email",clickable:""},on:{click:function(e){return t.openInNewTab("mailto:"+t.currentStop.HotelContact.email)}}},[t._v(t._s(t.currentStop.HotelContact.email)+"\n                  ")]):t._e(),t.currentStop.HotelContact.phone&&"undefined"!==typeof t.currentStop.HotelContact.phone?n("q-chip",{attrs:{icon:"phone",clickable:""},on:{click:function(e){return t.openInNewTab("tel:"+t.currentStop.HotelContact.phone)}}},[t._v(t._s(t.currentStop.HotelContact.phone)+"\n                  ")]):t._e()],1)]):t._e(),n("q-item-section",{attrs:{side:""}},[n("q-icon",{attrs:{name:"clear",color:"primary"},on:{click:function(e){return t.removeHotel()}}})],1)],1)],1):t._e()],1),n("q-dialog",{model:{value:t.addHotel,callback:function(e){t.addHotel=e},expression:"addHotel"}},[n("q-card",[n("q-card-section",[n("h6",{staticStyle:{margin:"0"}},[t._v("Hotels auf booking.com ansehen:")]),t.currentStop.Location?n("q-chip",{staticClass:"linkChip",staticStyle:{width:"117px","margin-bottom":"40px"},attrs:{icon:"launch",dense:"",clickable:""},on:{click:function(e){t.openInNewTab("https://www.booking.com/searchresults.de.html?ss="+t.currentStop.Location.label.split(",")[0]+"&checkin_year="+t.currentStop.InitDate.split(" ")[0].split(".")[2]+"&checkin_month="+t.currentStop.InitDate.split(".")[1]+"&checkin_monthday="+t.currentStop.InitDate.split(".")[0]+"&checkout_year="+t.getCheckOutDate().split(".")[2]+"&checkout_month="+t.getCheckOutDate().split(".")[1]+"&checkout_monthday="+t.getCheckOutDate().split(".")[0]+"&group_adults="+t.currentRoundtrip.Adults+t.getChildrenText()+"&no_rooms="+t.currentRoundtrip.Rooms+"&ac_langcode=de")}}},[t._v(" booking.com\n              ")]):t._e(),n("h6",{staticStyle:{margin:"0"}},[t._v("Hotel hinzufügen:")]),t.currentStop.Location&&t.currentStop.Location.lat?n("HotelSearch",{ref:"hotelSearch",attrs:{disabled:!t.getCheckOutDate(),lat:t.currentStop.Location.lat.toString(),long:t.currentStop.Location.lng.toString(),checkInDate:t.currentStop.InitDate,checkOutDate:t.getCheckOutDate(),roomAmount:parseInt(t.currentRoundtrip.Rooms),adults:parseInt(t.currentRoundtrip.Adults),childrenAges:t.currentRoundtrip.ChildrenAges},on:{update:function(e){return t.updateHotelData(e)}}}):t._e()],1),n("q-card-section",[n("q-input",{ref:"urlInput",attrs:{type:"url",rules:[function(e){return!e||t.urlReg.test(e)||"Bitte gib einen richtigen Link an"}],label:"Hotel link (optional)",outlined:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"link"}})]},proxy:!0}]),model:{value:t.generalTempLink,callback:function(e){t.generalTempLink=e},expression:"generalTempLink"}})],1),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Abbrechen",color:"primary"},on:{click:function(e){return t.removeHotel()}}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Hotel hinzufügen",color:"primary",disable:t.addHotelDisabled},on:{click:function(e){return t.addHotelToStop()}}})],1)],1)],1),n("q-select",{ref:"sightInput",staticStyle:{margin:"10px 10px 10px 0"},attrs:{label:"gemerkte Orte",filled:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique"},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"add"},on:{click:function(t){t.stopPropagation()}}})]},proxy:!0}]),model:{value:t.currentStop.Sights,callback:function(e){t.$set(t.currentStop,"Sights",e)},expression:"currentStop.Sights"}}),n("span",[t._v("Klicke auf diesen Stopp auf der Karte um dir Orte vorschlagen zu lassen"),n("br")]),n("q-editor",{ref:"editor_ref",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"min-height":"5rem",toolbar:t.editorToolbar,"toolbar-toggle-color":"primary",fonts:t.editorFonts,definitions:{format:{top:"Formatierung bei Kopieren beibehaten",icon:t.$q.iconSet.editor.formatting,label:"Format bei Kopie "+(this.preventPasting?"aus":"an"),handler:t.formatOn}}},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},nativeOn:{paste:function(e){return function(e){return t.pasteCapture(e)}(e)}},model:{value:t.currentStop.Description,callback:function(e){t.$set(t.currentStop,"Description",e)},expression:"currentStop.Description"}}),n("div",{staticClass:"flex"},[n("q-input",{ref:"tempImgLinkInput",staticStyle:{padding:"0",width:"80%","margin-bottom":"10px"},attrs:{filled:"",label:"Bild per Link einfügen",rules:[function(e){return t.sharedMethods.validURL(e)||"Bitte gib einen richtigen Link ein"}],"lazy-rules":"","bottom-slots":"",outlined:""},model:{value:t.tempImgLink,callback:function(e){t.tempImgLink=e},expression:"tempImgLink"}}),n("q-btn",{staticStyle:{"margin-left":"10px","margin-top":"5px",height:"45px"},attrs:{round:"",color:"primary",icon:"add",disable:!t.sharedMethods.validURL(t.tempImgLink)},on:{click:function(e){return t.addImageToStop(t.tempImgLink)}}})],1),t._v("\n        "+t._s(t.currentStop.StopImages)+"\n        "),n("Uploader",{attrs:{RTId:t.currentRoundtrip.RTId,stopImages:t.currentStop.StopImages?t.currentStop.StopImages:null,uploadDisabled:!1},on:{imageAdded:function(e){return t.addImageToStop(e)},imageDeleted:function(e){return t.removeImageFromStop(e)}}}),n("p",[t._v("Bitte verwende nur Bilder die für die Wiederverwendung eindeutig gekennzeichnet sind.")])],1),n("q-card-actions",{staticClass:"sticky-navigation",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Abbrechen",color:"primary"}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Speichern",color:"primary",disable:t.currentStop.DayDuration<0},on:{click:function(){t.addStop(!0)}}})],1)],1)],1)],1)},r=[],o=n("e188"),a=n("bc3a"),s=n.n(a),l=n("15c8"),c=n("bd4c"),u=n("1261");let p=Date.now(),d=c["b"].formatDate(p,"DD.MM.YYYY");var h={components:{HotelSearch:()=>n.e(13).then(n.bind(null,"1e43")),ArrivalDeparture:()=>n.e(4).then(n.bind(null,"87c3")),TripOverview:()=>Promise.all([n.e(0),n.e(1),n.e(14)]).then(n.bind(null,"afdd")),Uploader:()=>Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"8c8d"))},computed:{isMobile(){return window.matchMedia("(max-width: 550px)").matches},user(){return u["a"].user()},sharedMethods(){return l["a"]}},watch:{step:function(){l["a"].scrollToOffset(0)}},name:"RoundtripWizard",data(){return{step:1,countryOptions:o["a"],country:"Land wählen",preventPasting:!1,originOptions:[],destinationOptions:[],unsavedChanges:!1,currentRoundtrip:{Title:"",Rooms:1,Adults:2,ChildrenAges:[],Children:0,TransportProfile:"Reisemittel wählen",Origin:null,Destination:null,DepatureDate:d,ReturnDate:d,TravelClass:"Economy",NonStop:"Ja"},currentStop:{Title:"neuer Stopp",Description:"Raum für Notizen, Beschreibungen...",Location:null,Sights:[],InitDate:d+" 10:00",Profile:"driving",DayDuration:1},hotelLocation:{},hotelStars:0,hotelContact:{},hotelName:null,generalTempLink:null,hotelPrice:0,guestRating:0,transportLocations:[],showCancelDialog:!1,cancelDialogNext:null,addedStops:[],sightDialog:{showed:!1,title:"",imgSrc:"",description:"",shortDescription:""},addHotel:!1,addHotelDisabled:!0,inputProfile:"Auto",showAutoRoutedialog:!1,isRTEditMode:!1,saving:!1,totalTripDuration:0,totalTripDistance:0,stopToEdit:-1,showAddStopDialog:!1,showEditStopDialog:!1,tempImgLink:"",isTitleInUse:!0,editorFonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"},editorToolbar:[[{label:"",icon:this.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["fullscreen"],[{label:"Größe",icon:this.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:"Schrift",icon:this.$q.iconSet.editor.font,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]}],["quote","unordered","ordered","outdent","indent"],["format","image"],["undo","redo"]]}},methods:{addStop(t){console.log("stopToEdit "+this.stopToEdit),this.unsavedChanges=!0,"Raum für Notizen, Beschreibungen..."===this.currentStop.Description&&(this.currentStop.Description="");let e=l["a"].getDateFromString(this.currentStop.InitDate);if(e.setDate(e.getDate()+this.currentStop.DayDuration),this.stopToEdit>-1){if(this.addedStops[this.stopToEdit].DayDuration!==this.currentStop.DayDuration){const t=this.currentStop.DayDuration-this.addedStops[this.stopToEdit].DayDuration;for(let e=this.stopToEdit+1;e<this.addedStops.length;e++){const n=l["a"].getDateFromString(this.addedStops[e].InitDate);n.setDate(n.getDate()+t),this.addedStops[e].InitDate=c["b"].formatDate(n,"DD.MM.YYYY HH:mm")}}this.addedStops[this.stopToEdit]=this.currentStop,e=l["a"].getDateFromString(this.addedStops[this.addedStops.length-1].InitDate),e.setDate(e.getDate()+this.addedStops[this.addedStops.length-1].DayDuration),t&&(this.stopToEdit=-1)}else this.addedStops.push(this.currentStop);t&&(this.currentStop={Title:"neuer Stopp",Description:"Raum für Notizen, Beschreibungen...",Location:null,Sights:[],InitDate:c["b"].formatDate(e,"DD.MM.YYYY HH:mm"),Profile:"driving",DayDuration:1}),this.$refs.tripOverview&&this.$refs.tripOverview.refreshMap(),this.updateTotalTripDuration()},setTripToShortestRoute(){let t=this.getShortestRoute(),e=l["a"].getDateFromString(this.addedStops[0].InitDate);t.forEach((n,i)=>{n.InitDate=c["b"].formatDate(e,"DD.MM.YYYY HH:mm"),e.setDate(e.getDate()+1),i===t.length-1&&(this.addedStops=t)}),this.updateTotalTripDuration()},addSightFromMap(t){let e=this.addedStops[this.addedStops.findIndex(e=>e.Location.label===t.cityName)];e.Sights.push(t.poi.name)},getShortestRoute(){let t=[this.addedStops[0]];return this.addedStops.forEach((e,n)=>{if(n>0){let e=this.getShortestDistance(t[t.length-1],t);null!==e&&t.push(e)}}),t},getShortestDistance(t,e){let n=[],i=null;if(this.addedStops.forEach(i=>{e.includes(i)||n.push({distance:this.getDistanceFromLatLonInKm(t.Location.lng,t.Location.lat,i.Location.lng,i.Location.lat),stop:i})}),n.length>0){let t=[];n.forEach(e=>{t.push(e.distance)});let e=Math.min.apply(null,t);i=n[n.findIndex(t=>t.distance===e)].stop}return i},getDistanceFromLatLonInKm(t,e,n,i){var r=6371,o=this.deg2rad(n-t),a=this.deg2rad(i-e),s=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.deg2rad(t))*Math.cos(this.deg2rad(n))*Math.sin(a/2)*Math.sin(a/2),l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),c=r*l;return c},deg2rad(t){return t*(Math.PI/180)},updateArrivalDeparture(t){this.currentRoundtrip.TransportProfile=t.transportProfile,this.currentRoundtrip.Origin=t.origin,this.currentRoundtrip.Destination=t.destination,this.currentRoundtrip.DepatureDate=t.depatureDate,this.currentRoundtrip.ReturnDate=t.returnDate,this.currentRoundtrip.TravelClass=t.travelClass,this.currentRoundtrip.NonStop=t.nonStop},removeStop(t){this.unsavedChanges=!0;const e=this.addedStops[t].InitDate;this.addedStops[t].DocId&&u["b"].collection("RoundtripDetails").doc(this.addedStops[t].DocId).delete(),this.addedStops.splice(t,1),this.addedStops[t].InitDate=e;for(let r=t+1;r<this.addedStops.length;r++){let t=l["a"].getDateFromString(this.addedStops[r-1].InitDate);t.setDate(t.getDate()+this.addedStops[r-1].DayDuration),this.addedStops[r].InitDate=c["b"].formatDate(t,"DD.MM.YYYY")}let n=this.addedStops[this.addedStops.length-1],i=l["a"].getDateFromString(n.InitDate);i.setDate(i.getDate()+n.DayDuration),this.currentStop.InitDate=c["b"].formatDate(i,"DD.MM.YYYY HH:mm"),console.log("reload from delete"),this.$refs.tripOverview&&this.$refs.tripOverview.refreshMap(),0===this.addedStops.length&&(this.step=3),this.updateTotalTripDuration()},createTrip(t){this.unsavedChanges||t||this.$router.push("/rundreise-ansehen/"+this.$route.params.id);let e=JSON.parse(JSON.stringify(this.addedStops));e.forEach((t,e)=>{t.InitDate=l["a"].getDateFromString(this.addedStops[e].InitDate)}),this.currentRoundtrip.Title=this.currentRoundtrip.Title.charAt(0).toUpperCase()+this.currentRoundtrip.Title.slice(1),this.currentRoundtrip.Title=this.currentRoundtrip.Title.trim();let n=this.getTripDuration(),i="< 5 Tage";n<5?i="< 5 Tage":n>=5&&n<=8?i="5-8 Tage":n>=9&&n<=11?i="9-11 Tage":n>=12&&n<=15?i="12-15 Tage":n>15&&(i="> 15 Tage"),this.currentRoundtrip.Days=i,this.getRoundtripCountries().then(n=>{if(this.$store.getters["demoSession/isInDemoSession"]&&null===u["a"].user())this.$store.dispatch({type:"demoSession/addRoundtrip",roundtripObject:this.currentRoundtrip,tempLocation:n,originCode:null,destinationCode:null,stops:e}).then(()=>{this.unsavedChanges=!1,this.$router.push("/registrieren")});else if(this.isRTEditMode){let e=[];this.addedStops.forEach(t=>{t.DocId?e.push(u["b"].collection("RoundtripDetails").doc(t.DocId).update(t)):(t.RTId=this.$route.params.id,e.push(u["b"].collection("RoundtripDetails").add(t)))}),this.saving=!0;let n=this;Promise.all(e).then(()=>{n.saving=!1,n.unsavedChanges=!1,l["a"].showSuccessNotification("Reise wurde gespeichert"),t||setTimeout((function(){n.$router.push("/rundreise-ansehen/"+n.$route.params.id)}),1e3)})}else{this.saving=!0;try{this.$store.dispatch({type:"roundtrips/addRoundtrip",title:this.currentRoundtrip.Title,days:i,uid:u["a"].user().uid,rooms:this.currentRoundtrip.Rooms,adults:this.currentRoundtrip.Adults,childrenAges:this.currentRoundtrip.ChildrenAges,tempLocation:n,depatureDate:this.currentRoundtrip.DepatureDate,transportProfile:this.currentRoundtrip.TransportProfile,origin:this.currentRoundtrip.Origin,originCode:null,destination:this.currentRoundtrip.Destination,destinationCode:null,returnDate:this.currentRoundtrip.ReturnDate,travelClass:this.currentRoundtrip.TravelClass,nonStop:this.currentRoundtrip.NonStop,stops:e}).then(e=>{if(e&&null!==e){let n=this;t||setTimeout((function(){this.saving=!1,n.unsavedChanges=!1,n.$router.push("/rundreise-ansehen/"+e)}),500)}else this.saving=!1,l["a"].showErrorNotification("Deine Rundreise konnte nicht erstellt werden, bitte versuche es erneut")})}catch(r){return console.log(r),this.saving=!1,l["a"].showErrorNotification("Deine Rundreise konnte nicht erstellt werden, bitte versuche es erneut"),!1}}})},updateTotalTripDuration(){if(1===this.addedStops.length)this.totalTripDuration=this.addedStops[0].DayDuration;else{let t=l["a"].getDateFromString(this.addedStops[0].InitDate),e=l["a"].getDateFromString(this.addedStops[this.addedStops.length-1].InitDate);const n=864e5,i=Math.round(Math.abs((t-e)/n));this.totalTripDuration=i+this.addedStops[this.addedStops.length-1].DayDuration}},updateTotalTripDistance(t){console.log(t),-1===t?this.totalTripDistance=0:this.totalTripDistance+=t},getRoundtripCountries(){return new Promise(t=>{let e=[],n=[];this.addedStops.forEach((t,i)=>{let r="http://api.geonames.org/countryCodeJSON?lang=de&lat="+t.Location.lat+"&lng="+t.Location.lng+"&username=roundtrips4you";n.push(s.a.get(r).then(t=>{e.includes(t.data.countryName)||e.push(t.data.countryName)}).catch((function(t){console.log(t)})))}),Promise.all(n).then(n=>{t(e)})})},getTripDuration(){let t=l["a"].getDateFromString(this.addedStops[0].InitDate),e=l["a"].getDateFromString(this.addedStops[this.addedStops.length-1].InitDate);const n=864e5,i=Math.round(Math.abs((t-e)/n));this.tripDuration=i},onStopsDragged(t){if(this.unsavedChanges=!0,t.newIndex===t.oldIndex)return;let e=JSON.parse(JSON.stringify(t.addedStops)),n=e[t.newIndex],i=t.oldIndex>t.newIndex,r=e[t.newIndex-1];i&&(r=e[t.newIndex+1]),n.InitDate=JSON.parse(JSON.stringify(r.InitDate));for(let o=t.newIndex+1;o<e.length;o++){let t=l["a"].getDateFromString(e[o-1].InitDate);t.setDate(t.getDate()+e[o-1].DayDuration),e[o].InitDate=c["b"].formatDate(t,"DD.MM.YYYY HH:mm")}for(let o=t.newIndex-1;o>=0;o--){let t=l["a"].getDateFromString(e[o+1].InitDate);t.setDate(t.getDate()-e[o].DayDuration),console.log(t),e[o].InitDate=c["b"].formatDate(t,"DD.MM.YYYY HH:mm")}this.addedStops=JSON.parse(JSON.stringify(e))},editStop(t){this.currentStop=JSON.parse(JSON.stringify(this.addedStops[t])),this.stopToEdit=t,this.showEditStopDialog=!0},titleInUse(t){t.then(t=>{console.log("Dieser Titel ist bereits vergeben"===t),this.isTitleInUse="Dieser Titel ist bereits vergeben"===t})},isUniqueTitle(t){let e=l["a"].isUniqueTitle(t);return this.titleInUse(e),e},getChildrenText(){let t="&group_children="+this.currentRoundtrip.ChildrenAges.length;return this.currentRoundtrip.ChildrenAges.forEach(e=>{t+="&age="+e}),t},capitalize(t){return l["a"].capitalize(t)},addHotelToStop(){this.currentStop.HotelLocation=this.hotelLocation,this.currentStop.HotelStars=this.hotelStars,this.currentStop.HotelContact=this.hotelContact,this.currentStop.HotelName=this.hotelName,this.currentStop.GeneralLink=this.generalTempLink,this.currentStop.CheckOutDate=this.getCheckOutDate(),this.currentStop.HotelPrice=this.hotelPrice,this.currentStop.GuestRating=this.guestRating,this.currentStop.TransportLocations=this.transportLocations},removeHotel(){this.hotelName=null,delete this.currentStop.HotelLocation,delete this.currentStop.HotelStars,delete this.currentStop.HotelContact,delete this.currentStop.HotelName,delete this.currentStop.GeneralLink,delete this.currentStop.CheckOutDate,delete this.currentStop.HotelPrice,delete this.currentStop.GuestRating,delete this.currentStop.TransportLocations},getCheckOutDate(){let t=l["a"].getDateFromString(this.currentStop.InitDate);return t.setDate(t.getDate()+this.currentStop.DayDuration),t=c["b"].formatDate(t,"DD.MM.YYYY"),t},isDateTimeValid(){return l["a"].isDateTimeValid(this.currentStop.InitDate)},getGeneralProfile(){switch(this.inputProfile){case"zu Fuß":this.currentStop.Profile="walking";break;case"Fahrrad":this.currentStop.Profile="cycling";break;default:this.currentStop.Profile="driving";break}},openInNewTab(t){window.open(t,"_blank")},updateFromSuggestedCity(t){this.unsavedChanges=!0,this.currentStop.Location={lng:t.longitude,lat:t.latitude,label:t.name},this.currentStop.Title="Stopp in "+t.name.split(",")[0],this.step=5},updateLocation(t){null!==t?(this.currentStop.Location={lng:t.x,lat:t.y,label:t.label},this.currentStop.Title="Stopp in "+t.label.split(",")[0],this.step=5):this.currentStop.Location=null},formatOn(){this.preventPasting=!this.preventPasting},pasteCapture(t){if(this.preventPasting){let e,n;t.preventDefault(),t.originalEvent&&t.originalEvent.clipboardData.getData?(e=t.originalEvent.clipboardData.getData("text/plain"),this.$refs.editor_ref.runCmd("insertText",e)):t.clipboardData&&t.clipboardData.getData()?(e=t.clipboardData.getData("text/plain"),this.$refs.editor_ref.runCmd("insertText",e)):window.clipboardData&&window.clipboardData.getData&&(n||(n=!0,this.$refs.editor_ref.runCmd("ms-pasteTextOnly",e)),n=!1)}},updateHotelData(t){if(null!==t){this.addHotelDisabled=!0;let e=t.latitude,n=t.longitude;this.hotelName=t.name,t.destinationId?s.a.get("https://hotels4.p.rapidapi.com/properties/get-details?locale=de_DE&currency=EUR&id="+t.destinationId,{headers:{"content-type":"application/octet-stream","x-rapidapi-host":"hotels4.p.rapidapi.com","x-rapidapi-key":this.$store.getters["api/getHotels4Key"],useQueryString:!0}}).then(t=>{console.log(t);let i=t.data.data.body,r=i.propertyDescription,o=r.address.fullAddress,a=r.featuredPrice.currentPrice.plain,s=i.guestReviews.brands.formattedRating+" "+i.guestReviews.brands.badgeText,l=t.data.transportation.transportLocations;this.writeHotelData(o,e,n,r.starRating,a,s,l)}).catch(t=>{console.log(t)}):this.writeHotelData(t.address,e,n,null,null,null,null)}},writeHotelData(t,e,n,i,r,o,a){this.hotelLocation={lng:e,lat:n,label:t},this.hotelPrice=r&&"undefined"!==typeof r?r:null,this.guestRating=o&&"undefined"!==typeof o?o:null,this.transportLocations="undefined"!==typeof a?a:null,this.hotelStars=i&&"undefined"!==typeof i?i:null,this.addHotelDisabled=!1},getHotelTransportationIcon(t){switch(t){case"airport":return"flight";case"train-station":return"train";case"metro":return"subway";default:return"cummute"}},getOrigins(t,e,n){l["a"].filterAirports(t,e,n,this,"originOptions")},getDestinations(t,e,n){l["a"].filterAirports(t,e,n,this,"destinationOptions")},getLocationString(t){let e="";return t.forEach((t,n)=>{e=e+(0!==n?", ":"")+t}),e},updateReturnDate(){let t=this.currentRoundtrip.DepatureDate.split("."),e=new Date(t[2],t[1]-1,t[0]),n=e;n.setDate(e.getDate()+1),this.currentRoundtrip.ReturnDate=c["b"].formatDate(n,"DD.MM.YYYY")},addImageToStop(t){this.currentStop.StopImages||(this.currentStop.StopImages=[]),this.currentStop.StopImages.push(t),this.addStop(!1),this.tempImgLink=""},removeImageFromStop(t){this.currentStop.StopImages&&(this.currentStop.StopImages.splice(this.currentStop.StopImages.indexOf(t),1),this.addStop(!1))},handleAddStopFromMap(t){this.unsavedChanges=!0;let e=this.currentStop.InitDate;this.currentStop.Location!==t.location&&(this.currentStop={Title:"Stopp in "+t.location.label,Description:"Raum für Notizen, Beschreibungen...",Location:t.location,Sights:[],InitDate:e,Profile:"driving",DayDuration:1},this.showAddStopDialog=!0)},compare(t,e){const n=l["a"].getDateFromString(t.InitDate),i=l["a"].getDateFromString(e.InitDate);return n>i?1:i>n?-1:0}},beforeRouteLeave(t,e,n){this.unsavedChanges?(this.showCancelDialog=!0,this.cancelDialogNext=n):n()},created(){u["a"].authRef().onAuthStateChanged(()=>{if(this.$store.getters["demoSession/isInDemoSession"]||u["a"].user()){let t=this.$route.params.id;if(t){this.isRTEditMode=!0,this.step=6,this.currentRoundtrip.Title="Laden...",this.$store.dispatch("roundtrips/fetchSingleRoundtrip",t).then(t=>{this.currentRoundtrip=t}),this.$store.dispatch("images/loadAllImgs",t);let e=u["b"].collection("RoundtripDetails").where("RTId","==",t).orderBy("InitDate");e.get().then(t=>{t.forEach(t=>{let e=t.data();if("string"!==typeof e.InitDate){let t=new Date(1e3*e.InitDate.seconds);e.InitDate=c["b"].formatDate(t,"DD.MM.YYYY HH:mm")}e.DayDuration||(e.DayDuration=0),e.DocId=t.id,this.addedStops.push(e),this.addedStops.sort(this.compare),this.updateTotalTripDuration()})})}}else this.$store.commit("demoSession/setAsDemoSession")})}},m=h,g=(n("cde2"),n("2877")),S=Object(g["a"])(m,i,r,!1,null,null,null);e["default"]=S.exports},cde2:function(t,e,n){"use strict";var i=n("5236"),r=n.n(i);r.a}}]);