{"version":3,"sources":["webpack:///./src/pages/Register.vue?aca2","webpack:///src/pages/Register.vue","webpack:///./src/pages/Register.vue?93a5","webpack:///./src/pages/Register.vue"],"names":[],"mappings":";;;;;;;;;AAAA,0BAA0B,aAAa,0BAA0B,wBAAwB,iBAAiB,uCAAuC,4CAA4C,aAAa,kEAAkE,qMAAqM,mEAAmE,uBAAuB,QAAQ,gDAAgD,KAAK,qBAAqB,gBAAgB,OAAO,sDAAsD,gEAAgE,EAAE,kBAAkB,gEAAgE,EAAE,iDAAiD,QAAQ,+CAA+C,kBAAkB,yBAAyB,gBAAgB,OAAO,uHAAuH,0EAA0E,EAAE,EAAE,sBAAsB,2BAA2B,qBAAqB,oCAAoC,mDAAmD,KAAK,yBAAyB,yBAAyB,GAAG,YAAY,UAAU,8CAA8C,iBAAiB,wBAAwB,gBAAgB,OAAO,yIAAyI,uEAAuE,EAAE;AAC5vD,yBAAyB,8EAA8E,EAAE,EAAE,sBAAsB,2BAA2B,qBAAqB,oCAAoC,yDAAyD,KAAK,yBAAyB,qCAAqC,GAAG,YAAY,UAAU,oDAAoD,uBAAuB,8BAA8B,YAAY,aAAa,kBAAkB,cAAc,mCAAmC,gBAAgB,QAAQ,uGAAuG,sBAAsB,4BAA4B,yBAAyB,YAAY,GAAG,oBAAoB,0BAA0B,aAAa,aAAa,uBAAuB,wCAAwC,8CAA8C,gBAAgB,QAAQ,oFAAoF,KAAK,6BAA6B,sBAAsB,4BAA4B,yBAAyB,YAAY,GAAG,cAAc,aAAa,uBAAuB,mIAAmI,8BAA8B,eAAe,OAAO,eAAe,yBAAyB,OAAO,iEAAiE,keAAke,OAAO,yCAAyC,2KAA2K,aAAa,0CAA0C,8DAA8D,OAAO,eAAe;AACt0E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2GA;AACA;;AACA;;AACA;AAEA;AACA;AACA,wCADA;AAEA;AACA;AAHA;AAMA;AACA;AACA,yBADA;AAEA;AACA;AAAA;AAAA;AAAA;AADA;AAFA,GADA;AAOA,kBAPA;;AAQA;AACA;AACA,mBADA;AAEA,kBAFA;AAGA,wBAHA;AAIA,iBAJA;AAKA,uBALA;AAMA,uBANA;AAOA,0BAPA;AAQA;AARA;AAUA,GAnBA;;AAoBA;AACA;AACA;AACA;;AAHA,GApBA;AAyBA;AACA;AACA;AACA;AAEA,sGACA;AACA;AAEA;;AACA;AACA;AACA;AACA;AACA,WAHA;AAIA,SALA,MAKA;AACA;AACA;AACA;AACA,OAdA,EAeA;AACA;AACA;AACA,OAlBA;AAoBA,KAzBA;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,+CALA,CAOA;;AACA;AACA;AACA,WAFA,EAEA,KAFA,CAEA;AACA;AACA,WAJA;AAKA,SAbA,EAaA,KAbA,CAaA;AACA;AACA,SAfA;AAgBA,OAnBA;AAoBA,KA/CA;;AAgDA;AACA;AACA;AACA;AACA,SAFA,EAEA,KAFA,CAEA;AACA;AACA;AACA,SALA;AAMA;AACA,KAzDA;;AA0DA;AACA;AACA,qBADA;AAEA,qCAFA;AAGA,uCAHA;AAIA,8BAJA;AAKA;AALA;AAQA;AACA;;AApEA;AAzBA,G;;ACzHkL,CAAgB,2GAAG,EAAC,C;;;;;ACA/G;AAC3B;AACL;;;AAGvD;AAC0F;AAC1F,gBAAgB,8CAAU;AAC1B,EAAE,sCAAM;AACR,EAAE,MAAM;AACR,EAAE,eAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEe,+F","file":"js/36.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"register q-px-lg q-pb-md\"},[_c('h1',[_vm._v(\"Registrieren\")]),_c('p',{staticStyle:{\"text-align\":\"center\",\"font-size\":\"20px\",\"padding-bottom\":\"10px\"}},[_vm._v(_vm._s(!_vm.isInDemoSession ? 'Starte jetzt durch und nutze all unsere Funktionen komplett kostenlos' : 'Registriere dich jetzt um deine erstellte Rundreise zu speichern'))]),_c('q-form',{staticClass:\"q-gutter-md rounded-borders flex column\",staticStyle:{\"align-items\":\"center\"},attrs:{\"bordered\":\"\",\"method\":\"post\",\"target\":\"_blank\"},on:{\"submit\":_vm.signUp}},[_c('q-input',{attrs:{\"outlined\":\"\",\"type\":\"email\",\"rules\":[function (val) { return val !== null && val !== '' || 'Bitte gib eine Email an'; }, function (val) { return _vm.reg.test(val) || 'Bitte gib eine richtige Email an'; }],\"label\":\"Email\",\"lazy-rules\":\"\",\"name\":\"EMAIL\"},model:{value:(_vm.userEmail),callback:function ($$v) {_vm.userEmail=$$v},expression:\"userEmail\"}}),_c('q-input',{attrs:{\"outlined\":\"\",\"type\":_vm.isPwd ? 'password' : 'text',\"label\":\"neues Passwort\",\"lazy-rules\":\"\",\"rules\":[function (val) { return val !== null && val !== '' || 'Bitte gib dein neues Passwort ein'; }]},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('q-icon',{staticClass:\"cursor-pointer\",attrs:{\"name\":_vm.isPwd ? 'visibility_off' : 'visibility'},on:{\"click\":function($event){_vm.isPwd = !_vm.isPwd}}})]},proxy:true}]),model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('q-input',{attrs:{\"outlined\":\"\",\"type\":_vm.isPwdRepeat ? 'password' : 'text',\"label\":\"neues Passwort wiederholen\",\"lazy-rules\":\"\",\"rules\":[function (val) { return val !== null && val !== '' || 'Bitte wiederhole dein Passwort'; },\n         function (val) { return val === _vm.password || 'Die beiden Passwörter stimmen nicht überein'; }]},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('q-icon',{staticClass:\"cursor-pointer\",attrs:{\"name\":_vm.isPwdRepeat ? 'visibility_off' : 'visibility'},on:{\"click\":function($event){_vm.isPwdRepeat = !_vm.isPwdRepeat}}})]},proxy:true}]),model:{value:(_vm.passwordRepeat),callback:function ($$v) {_vm.passwordRepeat=$$v},expression:\"passwordRepeat\"}}),_c('div',{staticStyle:{\"padding\":\"10px\"}},[_c('q-btn',{staticClass:\"q-mt-md\",staticStyle:{\"width\":\"300px\"},attrs:{\"type\":\"submit\",\"loading\":_vm.submitting,\"label\":\"Registrieren\",\"color\":\"primary\",\"text-color\":\"white\"},scopedSlots:_vm._u([{key:\"loading\",fn:function(){return [_c('q-spinner')]},proxy:true}])})],1)],1),_c('div',{staticClass:\"google-form\"},[_c('span',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"oder\")]),_c('br'),_c('q-btn',{staticClass:\"q-mt-md google-btn\",staticStyle:{\"width\":\"300px\"},attrs:{\"loading\":_vm.googleLoading,\"label\":\"google konto verwenden\",\"icon\":\"fab fa-google\"},on:{\"click\":_vm.signUpWithGoogle},scopedSlots:_vm._u([{key:\"loading\",fn:function(){return [_c('q-spinner')]},proxy:true}])})],1),_c('p',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"Mit der Registrierung stimmst du zu das wir dir Emails an deine angegebene Adresse senden dürfen.\")]),_c('br'),_c('div',{staticClass:\"legal-container\"},[_c('q-list',{attrs:{\"bordered\":\"\"}},[_c('q-expansion-item',{attrs:{\"label\":\" Warum muss man sich bei Roundtrips4you registrieren?\"}},[_c('q-card',[_c('q-card-section',[_c('p',[_vm._v(\"Bei uns musst du dich nur Registrieren, damit wir deine Reisen auch dir zuordnen können.\")]),_c('p',[_vm._v(\"Leider geht dies nur wenn du einen Account hast der eindeutig zu dir gehört (deshalb brauchen wir deine Email Adresse).\")]),_c('p',[_vm._v(\"Nach der Registrierung musst du allerdings gar keine weiteren Daten angeben, wenn du das nicht möchtest.\")]),_c('p',[_vm._v(\"Natürlich kannst du uns auch jederzeit unter \"),_c('a',{attrs:{\"href\":\"mailto:hello@roundtrips4you.de\"}},[_vm._v(\"hello@roundtrips4you.de\")]),_vm._v(\" Fragen zum Datenschutz stellen oder einfach in der Datenschutzerklärung nachlesen.\")])])],1)],1)],1)],1),_c('br'),_c('div',{staticStyle:{\"font-size\":\"18px\",\"text-align\":\"center\"}},[_vm._v(\"Du hast bereits einen Account? \"),_c('router-link',{attrs:{\"to\":\"/login\"}},[_vm._v(\"Jetzt Anmelden\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"register q-px-lg q-pb-md\">\r\n    <h1>Registrieren</h1>\r\n    <p style=\"text-align:center; font-size:20px; padding-bottom:10px;\">{{!isInDemoSession ? 'Starte jetzt durch und nutze all unsere Funktionen komplett kostenlos' : 'Registriere dich jetzt um deine erstellte Rundreise zu speichern'}}</p>\r\n    <q-form\r\n      @submit=\"signUp\"\r\n      bordered\r\n      class=\"q-gutter-md rounded-borders flex column\"\r\n      style=\"align-items:center;\"\r\n      method=\"post\"\r\n      target=\"_blank\"\r\n    >\r\n      <!-- add this above for auto mailchimp subcribtion action=\"https://roundtrips4you.us18.list-manage.com/subscribe/post?u=ca8f607f808c8e5a9812aec8f&id=c64c971288&gdpr[71542]=true\" -->\r\n      <q-input\r\n        v-model=\"userEmail\"\r\n        outlined\r\n        type=\"email\"\r\n        :rules=\"[val => val !== null && val !== '' || 'Bitte gib eine Email an', val => reg.test(val) || 'Bitte gib eine richtige Email an']\"\r\n        label=\"Email\"\r\n        lazy-rules\r\n        name=\"EMAIL\"\r\n      />\r\n      <q-input\r\n        v-model=\"password\"\r\n        outlined\r\n        :type=\"isPwd ? 'password' : 'text'\"\r\n        label=\"neues Passwort\"\r\n        lazy-rules\r\n        :rules=\"[val => val !== null && val !== '' || 'Bitte gib dein neues Passwort ein']\"\r\n      >\r\n        <template v-slot:append>\r\n          <q-icon\r\n            :name=\"isPwd ? 'visibility_off' : 'visibility'\"\r\n            class=\"cursor-pointer\"\r\n            @click=\"isPwd = !isPwd\"\r\n          />\r\n        </template>\r\n      </q-input>\r\n      <q-input\r\n        v-model=\"passwordRepeat\"\r\n        outlined\r\n        :type=\"isPwdRepeat ? 'password' : 'text'\"\r\n        label=\"neues Passwort wiederholen\"\r\n        lazy-rules\r\n        :rules=\"[val => val !== null && val !== '' || 'Bitte wiederhole dein Passwort',\r\n           val => val === password || 'Die beiden Passwörter stimmen nicht überein']\"\r\n      >\r\n        <template v-slot:append>\r\n          <q-icon\r\n            :name=\"isPwdRepeat ? 'visibility_off' : 'visibility'\"\r\n            class=\"cursor-pointer\"\r\n            @click=\"isPwdRepeat = !isPwdRepeat\"\r\n          />\r\n        </template>\r\n      </q-input>\r\n      <div style=\"padding:10px;\">\r\n        <q-btn\r\n          type=\"submit\"\r\n          :loading=\"submitting\"\r\n          label=\"Registrieren\"\r\n          class=\"q-mt-md\"\r\n          color=\"primary\"\r\n          text-color=\"white\"\r\n          style=\"width:300px;\"\r\n        >\r\n          <template v-slot:loading>\r\n            <q-spinner />\r\n          </template>\r\n        </q-btn>\r\n      </div>\r\n    </q-form>\r\n    <div class=\"google-form\">\r\n      <span style=\"text-align:center;\">oder</span><br>\r\n      <q-btn\r\n        :loading=\"googleLoading\"\r\n        label=\"google konto verwenden\"\r\n        class=\"q-mt-md google-btn\"\r\n        style=\"width:300px;\"\r\n        icon=\"fab fa-google\"\r\n        @click=\"signUpWithGoogle\"\r\n      >\r\n        <template v-slot:loading>\r\n          <q-spinner />\r\n        </template>\r\n      </q-btn>\r\n    </div>\r\n    <p style=\"text-align:center;\">Mit der Registrierung stimmst du zu das wir dir Emails an deine angegebene Adresse senden dürfen.</p>\r\n    <br>\r\n    <div class=\"legal-container\">\r\n      <q-list bordered>\r\n        <q-expansion-item label=\" Warum muss man sich bei Roundtrips4you registrieren?\">\r\n          <q-card>\r\n            <q-card-section>\r\n              <p>Bei uns musst du dich nur Registrieren, damit wir deine Reisen auch dir zuordnen können.</p>\r\n              <p>Leider geht dies nur wenn du einen Account hast der eindeutig zu dir gehört (deshalb brauchen wir deine Email Adresse).</p>\r\n              <p>Nach der Registrierung musst du allerdings gar keine weiteren Daten angeben, wenn du das nicht möchtest.</p>\r\n              <p>Natürlich kannst du uns auch jederzeit unter <a href=\"mailto:hello@roundtrips4you.de\">hello@roundtrips4you.de</a> Fragen zum Datenschutz stellen oder einfach in der Datenschutzerklärung nachlesen.</p>\r\n            </q-card-section>\r\n          </q-card>\r\n        </q-expansion-item>\r\n      </q-list>\r\n    </div>\r\n    <br>\r\n    <div style=\"font-size:18px; text-align:center;\">Du hast bereits einen Account? <router-link to=\"/login\">Jetzt Anmelden</router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport(/* webpackPrefetch: true */ '../css/login.less')\r\nimport { auth, db } from '../firebaseInit.js'\r\nconst getFirebase = () => import('firebase')\r\nimport sharedMethods from '../sharedMethods.js'\r\n\r\nlet timeStamp = Date.now()\r\nvar actionCodeSettings = {\r\n  url: 'https://roundtrips4you.de/login',\r\n  // This must be true.\r\n  handleCodeInApp: true\r\n}\r\n\r\nexport default {\r\n  meta: {\r\n    title: 'Registrieren',\r\n    meta: {\r\n      description: { name: 'description', content: 'Registriere dich jetzt kostenlos bei roundtrips4you und erstelle selbst deine eigenen Reisen. Dein Reiseplaner mit Kartenfunktion, Städtevorschlag...' }\r\n    }\r\n  },\r\n  name: 'Register',\r\n  data () {\r\n    return {\r\n      userEmail: '',\r\n      password: '',\r\n      passwordRepeat: '',\r\n      isPwd: true,\r\n      isPwdRepeat: true,\r\n      submitting: false,\r\n      googleLoading: false,\r\n      reg: /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,24}))$/\r\n    }\r\n  },\r\n  computed: {\r\n    isInDemoSession () {\r\n      return this.$store.getters['demoSession/isInDemoSession']\r\n    }\r\n  },\r\n  methods: {\r\n    signUp (evt) {\r\n      let context = this\r\n      let mail = this.userEmail\r\n\r\n      auth.authRef().createUserWithEmailAndPassword(mail, this.password).then(\r\n        (user) => {\r\n          context.createUserEntry(user)\r\n\r\n          sharedMethods.showSuccessNotification('Juhuuu dein Konto wurde erfolgreich erstellt')\r\n          if (context.isInDemoSession) {\r\n            context.$store.dispatch('demoSession/saveRoundtrip', user.user.uid).then((newRTId) => {\r\n              evt.target.submit()\r\n              context.$router.replace('rundreise-ansehen/' + newRTId)\r\n            })\r\n          } else {\r\n            evt.target.submit()\r\n            context.$router.replace('meine-rundreisen')\r\n          }\r\n        },\r\n        (err) => {\r\n          console.log(err)\r\n          sharedMethods.showErrorNotification('Oh nein, du konntest leider nicht registriert werden, schreibe uns bitte ein email')\r\n        }\r\n      )\r\n    },\r\n    signUpWithGoogle () {\r\n      getFirebase().then(firebase => {\r\n        var provider = new firebase.auth.GoogleAuthProvider()\r\n        let context = this\r\n        auth.authRef().signInWithPopup(provider).then(function (result) {\r\n          // This gives you a Google Access Token. You can use it to access the Google API.\r\n          var token = result.credential.accessToken\r\n          const credential = firebase.auth.GoogleAuthProvider().credential(token)\r\n\r\n          context.createUserEntry(result.user)\r\n\r\n          // Sign in with credential from the Google user.\r\n          auth.signInWithCredential(credential).then(function () {\r\n            context.$router.replace('meine-rundreisen')\r\n          }).catch(function (error) {\r\n            console.log(error)\r\n          })\r\n        }).catch(function (error) {\r\n          console.log(error)\r\n        })\r\n      })\r\n    },\r\n    verifyMail (user) {\r\n      if (!user.emailVerified) {\r\n        user.sendEmailVerification(actionCodeSettings).then(function () {\r\n          sharedMethods.showSuccessNotification('Wir haben dir eine Bestätigungsmail für deine Email gesendet')\r\n        }).catch(function (error) {\r\n          console.log(error)\r\n          sharedMethods.showErrorNotification('Oh nein, wir konnten dir leider keine email senden, bitte kontaktiere uns unter hello@roundtrips4you.de')\r\n        })\r\n      }\r\n    },\r\n    createUserEntry (user) {\r\n      db.collection('User').add({\r\n        Reputation: 0,\r\n        UserImage: user.user.photoURL,\r\n        UserName: user.user.displayName,\r\n        UserUID: user.user.uid,\r\n        createdAt: new Date(timeStamp)\r\n      })\r\n\r\n      this.verifyMail(user.user)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=d15543ae&\"\nimport script from \"./Register.vue?vue&type=script&lang=js&\"\nexport * from \"./Register.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}