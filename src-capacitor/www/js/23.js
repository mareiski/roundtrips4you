(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{ed0d:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2Ny4xODEiIGhlaWdodD0iMzMuNDU1IiB2aWV3Qm94PSIwIDAgNjcuMTgxIDMzLjQ1NSI+DQogIDxnIGlkPSJHcnVwcGVfMSIgZGF0YS1uYW1lPSJHcnVwcGUgMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQ1OC40NDEgLTE1NS4wMDQpIj4NCiAgICA8cGF0aCBpZD0icGF0aDgxNSIgZD0iTTcuOC01MS42QzIuMjY5LTQzLjk3NCwxLjA2My0zNy4xODQsNC4xNDYtMzEuMDhjMy4xNTEsNi4yLDguNDE0LDcuOTQxLDE5LjQ3NSw2LjUwOUExNDcuNzYzLDE0Ny43NjMsMCwwLDAsMzkuNDc3LTI4YzIuOTUtLjc3OSwyLjkxNi0uODcyLDIuMDExLDIuNTg1LS45MzksMy41MTktLjk3MiwzLjg2Mi0uMzY5LDMuNjQ0YTE5LjQ5MiwxOS40OTIsMCwwLDAsMi41NDgtNC4xNDJMNDUuODEyLTI5LjlsMS44NzctLjU2MWMyLjU0OC0uNzQ3LDMuNzIxLTEuMzM5LDMuNzIxLTEuODY5LDAtLjU2MS0xLjY3Ni0uNjIzLTQuNDU4LS4xMjVsLTEuOTExLjMxMS00LjE5LTIuMzY3Yy01LjgzMy0zLjMtNi40LTMuMjctMi41ODEuMTg3YTI1Ljc5NCwyNS43OTQsMCwwLDEsMi45ODMsMi45NTksMzAuMzIzLDMwLjMyMywwLDAsMS0zLjYyLDEuMDI4Yy0xLjkxMS41LTUuNDMsMS40LTcuODQ0LDEuOTkzQzE5LjYzMy0yNS43NTUsMTEuNjIxLTI1LjYsOC4zLTI3Ljk2NmMtMS41MDgtMS4wOS0yLjU0OC0zLjMtMi43NDktNS45NzktLjItMi44LjUzNi01LjEwNywzLjUyLTExLjI0M2E0Mi4xMSw0Mi4xMSwwLDAsMCwyLjMxMy01LjQ1Yy4xNjgtMS4wMjgtLjczNy0zLjAyMS0xLjQ3NS0zLjI3QzkuNzExLTUzLjk3LDguNzcyLTUyLjkxMiw3LjgtNTEuNloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ1NS45NTYgMjEwLjE3NikiIGZpbGw9IiNkMzVmMjYiLz4NCiAgICA8dGV4dCBpZD0idGV4dDkyNyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDcyLjYyMiAxNzEuMjg0KSIgZmlsbD0iIzcwNzA3MCIgZm9udC1zaXplPSIxMCIgZm9udC1mYW1pbHk9IlJhbGV3YXkiPjx0c3BhbiB4PSIwIiB5PSIwIj5Sb3VuZHRyaXBzPC90c3Bhbj48L3RleHQ+DQogICAgPHRleHQgaWQ9InRleHQ5MzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ2Mi4xMzEgMTc5LjAwNCkiIGZpbGw9IiNkMzVmMjYiIGZvbnQtc2l6ZT0iMjEiIGZvbnQtZmFtaWx5PSJTZWdvZVVJLCBTZWdvZSBVSSI+PHRzcGFuIHg9IjAiIHk9IjAiPjQ8L3RzcGFuPjwvdGV4dD4NCiAgICA8dGV4dCBpZD0idGV4dDkzNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDczLjY0MSAxNzguNTAzKSIgZmlsbD0iIzcwNzA3MCIgZm9udC1zaXplPSIxMCIgZm9udC1mYW1pbHk9IlJhbGV3YXkiPjx0c3BhbiB4PSIwIiB5PSIwIj55b3U8L3RzcGFuPjwvdGV4dD4NCiAgPC9nPg0KPC9zdmc+DQo="},f241:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{attrs:{view:"hhh lpr fFf"}},[s("div",{ref:"Header",class:{"header-hidden":!t.showHeader},attrs:{id:"Header"}},[s("div",{staticClass:"top-row"},[s("div",{staticClass:"left-col"},[s("router-link",{staticStyle:{margin:"0"},attrs:{to:"/"}},[s("img",{attrs:{alt:"logo",src:i("ed0d")}})]),s("span",{staticClass:"beta-span cursor-pointer"},[t._v("[beta]\n          "),s("q-tooltip",{on:{click:function(t){return t.show()}}},[t._v("\n            Wir befinden uns derzeit in der Beta Phase, deshalb kann es leider noch zu bugs kommen\n          ")])],1)],1),s("div",{staticClass:"right-col"},[s("router-link",{staticClass:"header-page-link",attrs:{to:"/"}},[t._v("home")]),s("router-link",{staticClass:"header-page-link",attrs:{to:"/rundreisen-uebersicht"}},[t._v("reisen")]),t.user?s("router-link",{staticClass:"header-page-link",attrs:{to:"/meine-rundreisen"}},[t._v("meine Reisen")]):t._e(),t.user||this.$store.getters["demoSession/isInDemoSession"]?t._e():s("router-link",{staticClass:"header-page-link",attrs:{to:"/login"}},[t._v("anmelden")]),t.user||this.$store.getters["demoSession/isInDemoSession"]?t.user?s("q-avatar",{staticStyle:{width:"50px",margin:"auto 10px auto 10px"},style:t.user?"padding:0;":"font-size:60px;",attrs:{size:"50px",icon:t.user&&null!==t.user.photoURL?null:"account_circle"},on:{click:function(e){t.user||t.$router.push("/login"),t.showWelcomeTooltip=!1}}},[s("q-badge",{staticStyle:{top:"-1px",right:"-3px",width:"auto"},attrs:{color:"primary",floating:""}},[t._v(t._s(t.undreadNotifications))]),t.user&&null!==t.user.photoURL?s("img",{attrs:{src:t.user.photoURL}}):t._e(),s("div",{staticStyle:{"pointer-events":"none"}},[!t.user||t.user.displayName?s("q-tooltip",{attrs:{self:"center middle",anchor:"center middle",value:t.showWelcomeTooltip,"content-style":"font-size: 14px;","content-class":"tooltip"}},[t._v("\n              "+t._s(t.user?"Hallo, "+t.user.displayName:"Anmelden")+"\n            ")]):t._e()],1),t.user?s("q-menu",[s("q-list",{staticStyle:{"min-width":"100px"}},[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.$router.push("/profil")}}},[s("q-item-section",[t._v("\n                  Profil\n                ")])],1),s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.drawer=!t.drawer,t.markAllMessagesSeen()}}},[s("q-item-section",[s("span",[t._v("Nachrichten\n                    "),s("q-badge",{staticStyle:{top:"4px",right:"7px"},attrs:{color:"primary",floating:""}},[t._v(t._s(t.undreadNotifications))])],1)])],1),s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[s("q-item-section",{on:{click:t.logOut}},[t._v("Logout")])],1)],1)],1):t._e()],1):t._e():s("router-link",{staticClass:"flex justify-center register-header-link",staticStyle:{"flex-direction":"column","text-decoration":"none"},attrs:{to:"/registrieren"}},[s("q-btn",{attrs:{color:"primary"}},[t._v("Registrieren")])],1),s("div",{attrs:{id:"BurgerMenu"}},[s("svg",{ref:"svg",staticClass:"ham hamRotate ham7",attrs:{viewBox:"0 0 100 100",width:"80"},on:{click:function(e){t.$refs.svg.classList.toggle("active"),t.$refs.Header.classList.toggle("active")}}},[s("path",{staticClass:"line top",attrs:{d:"m 70,33 h -40 c 0,0 -6,1.368796 -6,8.5 0,7.131204 6,8.5013 6,8.5013 l 20,-0.0013"}}),s("path",{staticClass:"line middle",attrs:{d:"m 70,50 h -40"}}),s("path",{staticClass:"line bottom",attrs:{d:"m 69.575405,67.073826 h -40 c -5.592752,0 -6.873604,-9.348582 1.371031,-9.348582 8.244634,0 19.053564,21.797129 19.053564,12.274756 l 0,-40"}})]),s("div",{attrs:{id:"MobileMenu"}})])],1)]),s("div",{staticClass:"bottom-row"},[s("div",{on:{click:function(e){return t.hideMenu()}}},[s("router-link",{staticClass:"mobile-header-page-link",attrs:{to:"/"}},[t._v("home")])],1),s("div",{on:{click:function(e){return t.hideMenu()}}},[s("router-link",{staticClass:"mobile-header-page-link",attrs:{to:"/rundreisen-uebersicht"}},[t._v("reisen")])],1),t.user?s("div",{on:{click:function(e){return t.hideMenu()}}},[s("router-link",{staticClass:"mobile-header-page-link",attrs:{to:"/meine-rundreisen"}},[t._v("meine Reisen")])],1):t._e(),s("div",{staticClass:"flex justify-end",on:{click:function(e){return t.hideMenu()}}},[t.user?t._e():s("router-link",{staticClass:"mobile-header-page-link",attrs:{to:"/login"}},[t._v("anmelden")]),t.user?t._e():s("router-link",{staticClass:"flex justify-center",staticStyle:{"flex-direction":"column","text-decoration":"none","margin-right":"5px"},attrs:{to:"/registrieren"}},[s("q-btn",{attrs:{color:"primary"}},[t._v("registrieren")])],1)],1)])]),t.user?s("q-drawer",{attrs:{width:300,breakpoint:500,side:"right",overlay:"",bordered:"","content-class":"bg-grey-3"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("q-toolbar",{staticClass:"bg-primary text-white"},[s("q-toolbar-title",[t._v("\n        Benachrichtigungen\n      ")]),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:function(e){t.drawer=!1}}})],1),s("q-scroll-area",{staticClass:"fit"},t._l(t.messages,(function(e){return s("router-link",{key:e.id,staticStyle:{"text-decoration":"none"},attrs:{to:e.Link}},[s("q-card",{staticClass:"notification-card cursor-pointer"},[s("q-card-section",{staticClass:"created-at"},[t._v("\n            "+t._s(t.getStringDateFromTimestamp(e.createdAt))+"\n          ")]),s("q-card-section",{staticClass:"message"},[t._v("\n            "+t._s(e.Message)+"\n          ")]),s("q-card-section",{staticClass:"tag"},[s("q-icon",{staticStyle:{"font-size":"16px"},attrs:{name:e.Icon,color:"primary"}}),t._v(" "+t._s(e.Tag)+"\n          ")],1)],1)],1)})),1)],1):t._e(),t.isOnNetlifyPage?t._e():s("q-page-container",[s("router-view")],1),s("footer",[s("div",{staticClass:"main-footer"},[s("div",{staticClass:"footer-menu"},[s("h3",{staticClass:"footer-title"},[t._v("Menü")]),s("router-link",{staticClass:"footer-link",attrs:{to:"/"}},[t._v("Home")]),s("router-link",{staticClass:"footer-link",attrs:{to:"/rundreisen-uebersicht"}},[t._v("Reisen")]),s("router-link",{staticClass:"footer-link",attrs:{to:"/blog"}},[t._v("Blog")]),s("router-link",{staticClass:"footer-link",attrs:{to:"/ueber"}},[t._v("Über uns")])],1),s("div",{staticClass:"footer-infos"},[s("h3",{staticClass:"footer-title"},[t._v("Infos")]),t.isOnNetlifyPage?t._e():s("router-link",{staticClass:"footer-link",attrs:{rel:"nofollow",to:"/faq"}},[t._v("FAQs")]),t.isOnNetlifyPage?t._e():s("router-link",{staticClass:"footer-link",attrs:{rel:"nofollow",to:"/impressum"}},[t._v("Impressum")]),t.isOnNetlifyPage?t._e():s("router-link",{staticClass:"footer-link",attrs:{rel:"nofollow",to:"/haftungsausschluss"}},[t._v("Haftungsausschluss")]),t.isOnNetlifyPage?t._e():s("router-link",{staticClass:"footer-link",attrs:{rel:"nofollow",to:"/datenschutz"}},[t._v("Datenschutz")])],1),s("div",{staticClass:"footer-contact"},[s("h3",{staticClass:"footer-title"},[t._v("Kontakt")]),t.isOnNetlifyPage?t._e():s("a",{staticClass:"footer-link contact-link-box",attrs:{href:"https://roundtrips4you.de"}},[s("span",{staticClass:"footer-text"},[t._v("roundtrips4you")])]),s("a",{staticClass:"footer-link",attrs:{href:"mailto:hello@roundtrips4you.de"}},[t._v("hello@roundtrips4you.de")])]),s("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"mc_embed_signup"}},[s("form",{staticClass:"validate",attrs:{action:"https://roundtrips4you.us18.list-manage.com/subscribe/post?u=ca8f607f808c8e5a9812aec8f&id=c64c971288",method:"post",id:"mc-embedded-subscribe-form",name:"mc-embedded-subscribe-form",target:"_blank",novalidate:""}},[s("div",{attrs:{id:"mc_embed_signup_scroll"}},[s("label",{staticStyle:{"font-size":"18px"},attrs:{for:"mce-EMAIL"}},[t._v("Newsletter")]),s("input",{staticClass:"email",attrs:{type:"email",value:"",name:"EMAIL",id:"mce-EMAIL",placeholder:"Email Adresse",required:""}}),s("div",{staticStyle:{position:"absolute",left:"-5000px"},attrs:{"aria-hidden":"true"}},[s("input",{attrs:{type:"text",name:"b_ca8f607f808c8e5a9812aec8f_c64c971288",tabindex:"-1",value:""}})]),s("div",{staticClass:"clear"},[s("q-btn",{staticStyle:{"margin-top":"5px"},attrs:{dense:"",type:"submit",value:"Subscribe",name:"subscribe",id:"mc-embedded-subscribe",color:"primary"}},[t._v("Anmelden")])],1)])])])]),s("div",{staticClass:"flex justify-center"},[s("div",{staticClass:"flex",attrs:{id:"SocialMediaContainer"}},[s("q-icon",{staticStyle:{color:"#1f892f"},attrs:{name:"fab fa-tripadvisor"},on:{click:function(e){return t.openInNewTab("https://www.tripadvisor.de/Profile/Roundtrips4you")}}}),s("q-icon",{staticStyle:{color:"#d73532"},attrs:{name:"fab fa-pinterest-p"},on:{click:function(e){return t.openInNewTab("https://www.pinterest.de/roundtrips4you/")}}}),s("q-icon",{staticStyle:{color:"#C13584"},attrs:{name:"fab fa-instagram"},on:{click:function(e){return t.openInNewTab("https://www.instagram.com/roundtrips4you/")}}}),s("q-icon",{staticStyle:{color:"#3b5999"},attrs:{name:"fab fa-facebook-f"},on:{click:function(e){return t.openInNewTab("https://www.facebook.com/roundtrips4you/")}}})],1)]),s("CookieBanner")],1),t.showPreload?s("div",{staticClass:"preloadOverlay"}):t._e(),s("back-to-top",{staticStyle:{"z-index":"9600"}},[s("q-btn",{attrs:{round:"",color:"primary",icon:"airplanemode_active"}},[s("q-tooltip",[t._v("\n        Nach oben\n      ")])],1)],1),s("q-dialog",{attrs:{persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.isOnNetlifyPage,callback:function(e){t.isOnNetlifyPage=e},expression:"isOnNetlifyPage"}},[s("q-card",{staticClass:"bg-primary text-white"},[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Warnung! Du befinest dich nicht auf Roundtrips4you.")])]),s("q-card-section",{staticClass:"q-pt-none"},[t._v("\n        Dies ist eine Website die ausschließlich zum Debugging existiert.\n      ")])],1)],1)],1)},a=[],o=i("1261"),n=i("f508"),r=i("bd4c");let l=!1,c=!1,u=[];var d={name:"MyLayout",components:{CookieBanner:()=>i.e(12).then(i.bind(null,"7486")),BackToTop:()=>Promise.all([i.e(0),i.e(29)]).then(i.bind(null,"6afc"))},data(){return{showPreload:!0,onLine:navigator.onLine,isOnNetlifyPage:!1,RTId:null,drawer:!1,messages:[],showWelcomeTooltip:!0,undreadNotifications:0,showHeader:!0,lastScrollPosition:0}},meta(){return{title:"Reiseplaner",titleTemplate:t=>t+" | Roundtrips4you - Reise kostenlos planen | Route, Reise zusammenstellen",meta:{equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"}}}},computed:{user(){return this.$store.getters["user/user"]}},methods:{logOut(){o["a"].logout(this.$router,this.$store)},hideMenu(){this.$refs.svg.classList.remove("active"),this.$refs.Header.classList.remove("active")},getStringDateFromTimestamp(t){const e=new Date(1e3*t.seconds);return r["b"].formatDate(e,"DD.MM.YYYY HH:mm")},openInNewTab(t){window.open(t,"_blank")},onScroll(){const t=window.pageYOffset||document.documentElement.scrollTop;if(t<0)return;if(Math.abs(t-this.lastScrollPosition)<60)return;window.matchMedia("(max-width: 550px)").matches&&(this.showHeader=t<this.lastScrollPosition);let e=document.getElementsByClassName("sticky");e.length>0&&(window.pageYOffset+e[0].getBoundingClientRect().top>=350&&this.showHeader?e[0].classList.remove("at-top"):e[0].classList.add("at-top")),this.lastScrollPosition=t},hideLoading(){c=!1,this.showPreload=!1,n["a"].hide()},updateOnlineStatus(t){const{type:e}=t;this.onLine="online"===e},getHost(){return location.host},leaving(){window.addEventListener("beforeunload",t=>{(this.user&&("INPUT"===document.activeElement.tagName||document.activeElement.classList.contains("q-editor__content"))||this.$store.getters["demoSession/isInDemoSession"])&&(t.returnValue="You have unfinished changes!")})},getNotifications(){if(o["a"].user()){let t=o["b"].collection("PushNotifications").orderBy("createdAt","desc");t.get().then(t=>{u=[],t.forEach(t=>{if(!t.data().UserUID||t.data().UserUID===o["a"].user().uid){let e=u.push(t.data())-1;u[e].id=t.id}}),this.messages=u,this.setUnreadNotifications()})}},setUnreadNotifications(){let t=o["b"].collection("User").where("UserUID","==",o["a"].user().uid).limit(1);t.get().then(t=>{t.forEach(t=>{let e=0;this.messages.forEach(i=>{(i.UserUID&&!i.AlreadySeen||i.SeenUsers&&!Array.from(i.SeenUsers).includes(o["a"].user().uid))&&t.data().createdAt<i.createdAt&&e++}),this.undreadNotifications=e})}).catch(t=>{console.log(t)})},markAllMessagesSeen(){let t=this;this.messages.forEach(e=>{if(e.UserUID&&!e.AlreadySeen)o["b"].collection("PushNotifications").doc(e.id).update({AlreadySeen:!0}).then(e=>{0!==t.undreadNotifications&&t.undreadNotifications--}).catch(t=>{console.log(t)});else if(e.SeenUsers&&!e.SeenUsers.includes(o["a"].user().uid)){let i=Array.from(e.SeenUsers);i.push(o["a"].user().uid),o["b"].collection("PushNotifications").doc(e.id).update({SeenUsers:i}).then(e=>{0!==t.undreadNotifications&&t.undreadNotifications--}).catch(t=>{console.log(t)})}})}},watch:{onLine(t){t?this.$q.notify({color:"green-4",textColor:"white",icon:"check_circle",message:"Verbindung wiederhergestellt"}):this.$q.notify({color:"red-5",textColor:"white",icon:"error",message:"Bitte überprüfe deine Internetverbindung"})}},mounted(){window.addEventListener("online",this.updateOnlineStatus),window.addEventListener("offline",this.updateOnlineStatus),window.addEventListener("scroll",this.onScroll),this.getNotifications();let t=this;window.setInterval(()=>{t.getNotifications()},3e5)},beforeDestroy(){window.removeEventListener("online",this.updateOnlineStatus),window.removeEventListener("offline",this.updateOnlineStatus),window.removeEventListener("scroll",this.onScroll)},created(){this.$storyblok.isInitialized()||this.$storyblok.init({accessToken:this.$store.getters["api/getStoryblokKey"]}),this.leaving(),this.isOnNetlifyPage="roundtrips4you.netlify.app"===this.getHost()||"www.roundtrips4you.netlify.app"===this.getHost(),this.isOnNetlifyPage&&(this.showWelcomeTooltip=!1,window.location.replace("https://roundtrips4you.de")),o["a"].authRef().onAuthStateChanged(()=>{if(this.$router.beforeEach((t,e,i)=>{let s=null!==o["a"].user();l=!0;let a=t.matched.some(t=>t.meta.requireAuth),n=t.matched.some(t=>t.meta.guestOnly),r="/login"===t.path,u="/meine-rundreisen"===t.path;r||!a||s?!u&&n&&s?i("meine-rundreisen"):i():i("login"),c=!0}),!l){let t=null!==o["a"].user(),e=this.$router.currentRoute,i=e.matched.some(t=>t.meta.requireAuth),s=e.matched.some(t=>t.meta.guestOnly),a="/login"===e.fullPath,n="/meine-rundreisen"===e.fullPath;a||!i||t?!n&&s&&t&&this.$router.replace("meine-rundreisen"):this.$router.replace("login"),c=!0}c&&this.hideLoading()})}},h=d,m=i("2877"),p=Object(m["a"])(h,s,a,!1,null,null,null);e["default"]=p.exports}}]);