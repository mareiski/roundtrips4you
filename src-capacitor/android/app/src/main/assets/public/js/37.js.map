{"version":3,"sources":["webpack:///./src/pages/User.vue?4ddc","webpack:///src/pages/User.vue","webpack:///./src/pages/User.vue?dd8c","webpack:///./src/pages/User.vue"],"names":[],"mappings":"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","file":"js/37.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.user)?_c('div',{staticClass:\"user q-px-lg q-pb-md\"},[_c('q-tabs',{staticClass:\"text-grey\",staticStyle:{\"padding-top\":\"40px\"},attrs:{\"dense\":\"\",\"active-color\":\"primary\",\"indicator-color\":\"primary\",\"align\":\"justify\",\"narrow-indicator\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('q-tab',{attrs:{\"name\":\"publicProfile\",\"label\":\"Öffentliches Profil\"}}),_c('q-tab',{attrs:{\"name\":\"settings\",\"label\":\"Einstellungen\"}})],1),_c('q-separator'),_c('q-tab-panels',{attrs:{\"keep-alive\":\"\",\"animated\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('q-tab-panel',{attrs:{\"name\":\"publicProfile\"}},[_c('public-user-profile')],1),_c('q-tab-panel',{attrs:{\"name\":\"settings\"}},[_c('h4',[_vm._v(\"Einstellungen\")]),_c('q-form',{staticClass:\"q-gutter-md rounded-borders\",attrs:{\"bordered\":\"\"},on:{\"submit\":_vm.onSaveUserSettings}},[_c('q-list',{staticClass:\"rounded-borders\",staticStyle:{\"padding\":\"10px\",\"margin-bottom\":\"30px\"},attrs:{\"bordered\":\"\"}},[_c('q-input',{attrs:{\"outlined\":\"\",\"rules\":[function (val) { return val !== null && val !== '' && (_vm.user.displayName === val || _vm.uniqueUserName(val)) || 'Bitte wähle einen Benutzernamen'; }],\"label\":\"Benutzername\",\"lazy-rules\":\"\"},model:{value:(_vm.UserDisplayName),callback:function ($$v) {_vm.UserDisplayName=$$v},expression:\"UserDisplayName\"}}),(_vm.companyProfile)?_c('q-input',{attrs:{\"outlined\":\"\",\"clear-icon\":\"\",\"rules\":[function (val) { return !val || _vm.urlReg.test(val) || 'Bitte gib einen richtigen Link an'; }],\"label\":\"Website\",\"lazy-rules\":\"\"},model:{value:(_vm.CompanyWebsite),callback:function ($$v) {_vm.CompanyWebsite=$$v},expression:\"CompanyWebsite\"}}):_vm._e(),(_vm.companyProfile)?_c('q-input',{attrs:{\"outlined\":\"\",\"autogrow\":\"\",\"label\":\"Unternehmensbeschreibung\",\"rules\":[function (val) { return val !== null && val !== '' || 'Bitte gib eine Beschreibung an'; },\n        function (val) { return val.length > 10 && val.length < 160 || 'Bitte gib eine Beschreibung zwischen 10 und 160 Zeichen an'; } ]},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_c('q-icon',{attrs:{\"name\":\"subject\"}})]},proxy:true}],null,false,823822416),model:{value:(_vm.companyDescription),callback:function ($$v) {_vm.companyDescription=$$v},expression:\"companyDescription\"}}):_vm._e(),_c('div',{staticClass:\"flex\"},[_c('div',[_c('div',{staticClass:\"uploader\",style:({ backgroundImage: 'url('+ _vm.titleImgUrl +')' })},[_c('q-btn',{attrs:{\"round\":\"\",\"color\":\"primary\",\"icon\":\"add\"},on:{\"click\":function () { return _vm.$refs.titleUpload.pickFiles(); }}})],1),_c('q-uploader',{ref:\"titleUpload\",staticStyle:{\"max-width\":\"300px\",\"display\":\"none\"},attrs:{\"url\":\"\",\"label\":\"Titelbild hochladen\",\"accept\":\".jpg, image/*\",\"hide-upload-btn\":\"\"},on:{\"added\":function($event){return _vm.fileAdded($event)}}})],1)]),_c('div',{staticClass:\"row\"},[_c('q-btn',{staticClass:\"q-mt-md\",attrs:{\"type\":\"submit\",\"loading\":_vm.submitting,\"label\":\"Speichern\",\"color\":\"primary\",\"text-color\":\"white\"},scopedSlots:_vm._u([{key:\"loading\",fn:function(){return [_c('q-spinner')]},proxy:true}],null,false,3173242255)})],1)],1)],1),_c('q-form',{staticClass:\"q-gutter-md rounded-borders\",attrs:{\"bordered\":\"\"},on:{\"submit\":_vm.onSaveUserPass}},[_c('q-list',{staticClass:\"rounded-borders\",attrs:{\"bordered\":\"\"}},[_c('q-expansion-item',{staticClass:\"add-item\",attrs:{\"clickable\":\"\",\"expand-separator\":\"\"},on:{\"click\":function($event){_vm.addButtonActive = !_vm.addButtonActive}},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('q-item-section',{staticStyle:{\"align-items\":\"center\"}},[_c('span',[_vm._v(\"Passwort ändern\")])])]},proxy:true}],null,false,1439800149),model:{value:(_vm.addExpanded),callback:function ($$v) {_vm.addExpanded=$$v},expression:\"addExpanded\"}},[_c('div',{staticStyle:{\"padding\":\"10px\"}},[_c('q-input',{attrs:{\"outlined\":\"\",\"type\":_vm.isPwd ? 'password' : 'text',\"label\":\"neues Passwort\",\"rules\":[function (val) { return val !== null && val !== '' || 'Bitte gib dein neues Passwort ein'; }]},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('q-icon',{staticClass:\"cursor-pointer\",attrs:{\"name\":_vm.isPwd ? 'visibility_off' : 'visibility'},on:{\"click\":function($event){_vm.isPwd = !_vm.isPwd}}})]},proxy:true}],null,false,3635466494),model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('q-input',{attrs:{\"outlined\":\"\",\"type\":_vm.isPwdRepeat ? 'password' : 'text',\"label\":\"neues Passwort wiederholen\",\"rules\":[function (val) { return val !== null && val !== '' || 'Bitte wiederhole dein Passwort'; },\n         function (val) { return val === _vm.password || 'Die beiden Passwörter stimmen nicht überein'; }]},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('q-icon',{staticClass:\"cursor-pointer\",attrs:{\"name\":_vm.isPwdRepeat ? 'visibility_off' : 'visibility'},on:{\"click\":function($event){_vm.isPwdRepeat = !_vm.isPwdRepeat}}})]},proxy:true}],null,false,1612466441),model:{value:(_vm.passwordRepeat),callback:function ($$v) {_vm.passwordRepeat=$$v},expression:\"passwordRepeat\"}}),_c('div',{staticClass:\"row\"},[_c('q-btn',{staticClass:\"q-mt-md\",attrs:{\"type\":\"submit\",\"loading\":_vm.submitting,\"label\":\"Speichern\",\"color\":\"primary\",\"text-color\":\"white\"},scopedSlots:_vm._u([{key:\"loading\",fn:function(){return [_c('q-spinner')]},proxy:true}],null,false,3173242255)})],1)],1)])],1)],1),_c('h4',[_vm._v(\"Danger Zone\")]),_c('q-list',{staticClass:\"rounded-borders\",staticStyle:{\"padding\":\"10px\",\"border-color\":\"red\"},attrs:{\"bordered\":\"\"}},[_c('p',{staticStyle:{\"font-size\":\"18px\"}},[_vm._v(\"Dieses Konto und alle enthaltenen Inhalte löschen\")]),_c('q-btn',{staticClass:\"q-mt-md\",attrs:{\"loading\":_vm.deleting,\"label\":\"Löschen\",\"color\":\"primary\",\"text-color\":\"white\"},on:{\"click\":function($event){_vm.deleteDialog = true;}},scopedSlots:_vm._u([{key:\"loading\",fn:function(){return [_c('q-spinner')]},proxy:true}],null,false,3173242255)}),_c('q-dialog',{attrs:{\"persistent\":\"\"},model:{value:(_vm.deleteDialog),callback:function ($$v) {_vm.deleteDialog=$$v},expression:\"deleteDialog\"}},[_c('q-card',[_c('q-card-section',{staticClass:\"row items-center\"},[_c('span',{staticClass:\"q-ml-sm\"},[_vm._v(\"Willst du wirklich deinen Konto und alle deine Reisen löschen ? Dies kann nicht mehr rückgängig gemacht werden.\")])]),_c('q-card-actions',{attrs:{\"align\":\"right\"}},[_c('q-btn',{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{\"flat\":\"\",\"label\":\"Abbrechen\",\"color\":\"primary\"}}),_c('q-btn',{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{\"flat\":\"\",\"label\":\"Konto Löschen\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.deleteAccount()}}})],1)],1)],1)],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    class=\"user q-px-lg q-pb-md\"\r\n    v-if=\"user\"\r\n  >\r\n    <q-tabs\r\n      v-model=\"tab\"\r\n      dense\r\n      class=\"text-grey\"\r\n      active-color=\"primary\"\r\n      indicator-color=\"primary\"\r\n      align=\"justify\"\r\n      narrow-indicator\r\n      style=\"padding-top:40px;\"\r\n    >\r\n      <q-tab\r\n        name=\"publicProfile\"\r\n        label=\"Öffentliches Profil\"\r\n      >\r\n      </q-tab>\r\n      <q-tab\r\n        name=\"settings\"\r\n        label=\"Einstellungen\"\r\n      />\r\n    </q-tabs>\r\n    <q-separator />\r\n\r\n    <q-tab-panels\r\n      v-model=\"tab\"\r\n      keep-alive\r\n      animated\r\n    >\r\n      <q-tab-panel name=\"publicProfile\">\r\n        <public-user-profile></public-user-profile>\r\n      </q-tab-panel>\r\n      <q-tab-panel name=\"settings\">\r\n        <h4>Einstellungen</h4>\r\n        <q-form\r\n          @submit=\"onSaveUserSettings\"\r\n          bordered\r\n          class=\"q-gutter-md rounded-borders\"\r\n        >\r\n          <q-list\r\n            bordered\r\n            class=\"rounded-borders\"\r\n            style=\"padding:10px; margin-bottom:30px;\"\r\n          >\r\n            <q-input\r\n              v-model=\"UserDisplayName\"\r\n              outlined\r\n              :rules=\"[val => val !== null && val !== '' && (user.displayName === val || uniqueUserName(val)) || 'Bitte wähle einen Benutzernamen']\"\r\n              label=\"Benutzername\"\r\n              lazy-rules\r\n            />\r\n            <q-input\r\n              v-model=\"CompanyWebsite\"\r\n              v-if=\"companyProfile\"\r\n              outlined\r\n              clear-icon\r\n              :rules=\"[val => !val || urlReg.test(val) || 'Bitte gib einen richtigen Link an']\"\r\n              label=\"Website\"\r\n              lazy-rules\r\n            />\r\n            <q-input\r\n              v-model=\"companyDescription\"\r\n              v-if=\"companyProfile\"\r\n              outlined\r\n              autogrow\r\n              label=\"Unternehmensbeschreibung\"\r\n              :rules=\"[val => val !== null && val !== '' || 'Bitte gib eine Beschreibung an',\r\n          val => val.length > 10 && val.length < 160 || 'Bitte gib eine Beschreibung zwischen 10 und 160 Zeichen an' ]\"\r\n            > <template v-slot:prepend>\r\n                <q-icon name=\"subject\" />\r\n              </template>\r\n            </q-input>\r\n            <!--\r\n        <q-input\r\n          v-model=\"UserEmail\"\r\n          outlined\r\n          clearable\r\n          :rules=\"[val => val !== null && val !== '' || 'Bitte gib eine Email Adresse an']\"\r\n          label=\"Email Adresse\"\r\n        />-->\r\n            <div class=\"flex\">\r\n              <div>\r\n                <div\r\n                  class=\"uploader\"\r\n                  :style=\"{ backgroundImage: 'url('+ titleImgUrl +')' }\"\r\n                >\r\n                  <q-btn\r\n                    round\r\n                    color=\"primary\"\r\n                    icon=\"add\"\r\n                    @click=\"() => $refs.titleUpload.pickFiles()\"\r\n                  ></q-btn>\r\n                </div>\r\n                <q-uploader\r\n                  url=\"\"\r\n                  label=\"Titelbild hochladen\"\r\n                  accept=\".jpg, image/*\"\r\n                  style=\"max-width: 300px; display:none;\"\r\n                  hide-upload-btn\r\n                  ref=\"titleUpload\"\r\n                  @added=\"fileAdded($event)\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <q-btn\r\n                type=\"submit\"\r\n                :loading=\"submitting\"\r\n                label=\"Speichern\"\r\n                class=\"q-mt-md\"\r\n                color=\"primary\"\r\n                text-color=\"white\"\r\n              >\r\n                <template v-slot:loading>\r\n                  <q-spinner />\r\n                </template>\r\n              </q-btn>\r\n            </div>\r\n          </q-list>\r\n        </q-form>\r\n        <q-form\r\n          @submit=\"onSaveUserPass\"\r\n          bordered\r\n          class=\"q-gutter-md rounded-borders\"\r\n        >\r\n          <q-list\r\n            bordered\r\n            class=\"rounded-borders\"\r\n          >\r\n            <q-expansion-item\r\n              clickable\r\n              expand-separator\r\n              v-model=\"addExpanded\"\r\n              class=\"add-item\"\r\n              @click=\"addButtonActive = !addButtonActive\"\r\n            >\r\n              <template v-slot:header>\r\n                <q-item-section style=\"align-items: center;\">\r\n                  <span>Passwort ändern</span>\r\n                </q-item-section>\r\n              </template>\r\n              <div style=\"padding:10px;\">\r\n                <q-input\r\n                  v-model=\"password\"\r\n                  outlined\r\n                  :type=\"isPwd ? 'password' : 'text'\"\r\n                  label=\"neues Passwort\"\r\n                  :rules=\"[val => val !== null && val !== '' || 'Bitte gib dein neues Passwort ein']\"\r\n                >\r\n                  <template v-slot:append>\r\n                    <q-icon\r\n                      :name=\"isPwd ? 'visibility_off' : 'visibility'\"\r\n                      class=\"cursor-pointer\"\r\n                      @click=\"isPwd = !isPwd\"\r\n                    />\r\n                  </template>\r\n                </q-input>\r\n                <q-input\r\n                  v-model=\"passwordRepeat\"\r\n                  outlined\r\n                  :type=\"isPwdRepeat ? 'password' : 'text'\"\r\n                  label=\"neues Passwort wiederholen\"\r\n                  :rules=\"[val => val !== null && val !== '' || 'Bitte wiederhole dein Passwort',\r\n           val => val === password || 'Die beiden Passwörter stimmen nicht überein']\"\r\n                >\r\n                  <template v-slot:append>\r\n                    <q-icon\r\n                      :name=\"isPwdRepeat ? 'visibility_off' : 'visibility'\"\r\n                      class=\"cursor-pointer\"\r\n                      @click=\"isPwdRepeat = !isPwdRepeat\"\r\n                    />\r\n                  </template>\r\n                </q-input>\r\n                <div class=\"row\">\r\n                  <q-btn\r\n                    type=\"submit\"\r\n                    :loading=\"submitting\"\r\n                    label=\"Speichern\"\r\n                    class=\"q-mt-md\"\r\n                    color=\"primary\"\r\n                    text-color=\"white\"\r\n                  >\r\n                    <template v-slot:loading>\r\n                      <q-spinner />\r\n                    </template>\r\n                  </q-btn>\r\n                </div>\r\n              </div>\r\n            </q-expansion-item>\r\n          </q-list>\r\n        </q-form>\r\n        <h4>Danger Zone</h4>\r\n        <q-list\r\n          bordered\r\n          class=\"rounded-borders\"\r\n          style=\"padding:10px; border-color:red;\"\r\n        >\r\n          <p style=\"font-size:18px;\">Dieses Konto und alle enthaltenen Inhalte löschen</p>\r\n          <q-btn\r\n            :loading=\"deleting\"\r\n            label=\"Löschen\"\r\n            class=\"q-mt-md\"\r\n            color=\"primary\"\r\n            text-color=\"white\"\r\n            @click=\"deleteDialog = true;\"\r\n          >\r\n            <template v-slot:loading>\r\n              <q-spinner />\r\n            </template>\r\n          </q-btn>\r\n          <q-dialog\r\n            persistent\r\n            v-model=\"deleteDialog\"\r\n          >\r\n            <q-card>\r\n              <q-card-section class=\"row items-center\">\r\n                <span class=\"q-ml-sm\">Willst du wirklich deinen Konto und alle deine Reisen löschen ? Dies kann nicht mehr rückgängig gemacht werden.</span>\r\n              </q-card-section>\r\n\r\n              <q-card-actions align=\"right\">\r\n                <q-btn\r\n                  flat\r\n                  label=\"Abbrechen\"\r\n                  color=\"primary\"\r\n                  v-close-popup\r\n                />\r\n                <q-btn\r\n                  flat\r\n                  label=\"Konto Löschen\"\r\n                  @click=\"deleteAccount()\"\r\n                  color=\"primary\"\r\n                  v-close-popup\r\n                />\r\n              </q-card-actions>\r\n            </q-card>\r\n          </q-dialog>\r\n        </q-list>\r\n      </q-tab-panel>\r\n    </q-tab-panels>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { auth, storage, db } from '../firebaseInit.js'\r\n\r\nexport default {\r\n  meta: {\r\n    title: 'Profil',\r\n    meta: {\r\n      robot: { name: 'description', content: 'Dein Profil auf roundtrips4you. Dein Reiseplaner mit Kartenfunktion, Städtevorschlag, Hotelsuche...' }\r\n\r\n    }\r\n  },\r\n  name: 'user',\r\n  data () {\r\n    return {\r\n      UserDisplayName: '',\r\n      UserEmail: '',\r\n      submitting: false,\r\n      titleImgUrl: '',\r\n      password: '',\r\n      isPwd: true,\r\n      passwordRepeat: '',\r\n      isPwdRepeat: true,\r\n      deleteDialog: false,\r\n      deleting: false,\r\n      urlReg: /^(http:\\/\\/|https:\\/\\/)/,\r\n      CompanyWebsite: null,\r\n      companyProfile: false,\r\n      companyDescription: null,\r\n      tab: 'publicProfile',\r\n      addExpanded: false\r\n    }\r\n  },\r\n  components: {\r\n    PublicUserProfile: () => import('../pages/PublicUserProfile.vue')\r\n  },\r\n  computed: {\r\n    user () {\r\n      return this.$store.getters['user/user']\r\n    }\r\n  },\r\n  methods: {\r\n    logOut () {\r\n      auth.logout(this.$router, this.$store)\r\n    },\r\n    fileAdded: function (event) {\r\n      let files = event\r\n      this.upload(files[0])\r\n      this.$refs.titleUpload.reset()\r\n    },\r\n    upload (file) {\r\n      const context = this\r\n      const fileRef = storage.ref().child('Images/Users/' + auth.user().uid + '/TitleImg')\r\n      fileRef.put(file).then(function (snapshot) {\r\n        context.$q.notify({\r\n          color: 'green-4',\r\n          textColor: 'white',\r\n          icon: 'check_circle',\r\n          message: 'Bild wurde erfolgreich hochgeladen'\r\n        })\r\n        fileRef.getDownloadURL().then(function (url) {\r\n          context.titleImgUrl = url\r\n          context.onSaveUserSettings()\r\n        })\r\n      })\r\n    },\r\n    onSaveUserSettings () {\r\n      let user = auth.user()\r\n      if (user.displayName === this.UserDisplayName || this.uniqueUserName(this.UserDisplayName)) {\r\n        let context = this\r\n        user.updateProfile({\r\n          displayName: this.UserDisplayName,\r\n          photoURL: this.titleImgUrl\r\n        }).then(function () {\r\n          // user.updateEmail(context.UserEmail).then(function () {\r\n\r\n          context.updateDBEntry(user.uid)\r\n          // Update successful\r\n          context.$q.notify({\r\n            color: 'green-4',\r\n            textColor: 'white',\r\n            icon: 'check_circle',\r\n            message: 'Einstellungen wurden erfolgreich gespeichert'\r\n          })\r\n          /* }).catch(function (error) {\r\n            console.log(error)\r\n            context.$q.notify({\r\n              color: 'red-5',\r\n              textColor: 'white',\r\n              icon: 'error',\r\n              message: 'Es ist ein Fehler aufgetreten, bitte versuche es erneut'\r\n            })\r\n          }) */\r\n        }).catch(function (error) {\r\n          console.log(error)\r\n          context.$q.notify({\r\n            color: 'red-5',\r\n            textColor: 'white',\r\n            icon: 'error',\r\n            message: 'Es ist ein Fehler aufgetreten, bitte versuche es erneut'\r\n          })\r\n        })\r\n      } else {\r\n        this.$q.notify({\r\n          color: 'red-5',\r\n          textColor: 'white',\r\n          icon: 'error',\r\n          message: 'Bitte gib einen anderen Benutzernamen an'\r\n        })\r\n      }\r\n    },\r\n    updateDBEntry (uid) {\r\n      let context = this\r\n      let roundtripsRef = db.collection('User')\r\n        .where('UserUID', '==', uid)\r\n        .limit(1)\r\n      roundtripsRef.get()\r\n        .then(snapshot => {\r\n          snapshot.forEach(doc => {\r\n            db.collection('User').doc(doc.id).update({\r\n              UserImage: context.titleImgUrl,\r\n              UserName: context.UserDisplayName,\r\n              website: context.CompanyWebsite,\r\n              companyDescription: context.companyDescription\r\n            })\r\n          })\r\n        })\r\n    },\r\n    onSaveUserPass () {\r\n      let context = this\r\n      auth.user().updatePassword(this.password).then(function () {\r\n        context.$q.notify({\r\n          color: 'green-4',\r\n          textColor: 'white',\r\n          icon: 'check_circle',\r\n          message: 'Passwort wurde erfolgreich geändert'\r\n        })\r\n      }).catch(function (error) {\r\n        console.log(error)\r\n        if (error.code === 'auth/requires-recent-login') {\r\n          context.$q.notify({\r\n            color: 'red-5',\r\n            textColor: 'white',\r\n            icon: 'error',\r\n            message: 'Bitte melde dich erneut an, bevor du dein Passwort änderst'\r\n          })\r\n        } else {\r\n          context.$q.notify({\r\n            color: 'red-5',\r\n            textColor: 'white',\r\n            icon: 'error',\r\n            message: 'Es ist ein Fehler aufgetreten, bitte versuche es erneut'\r\n          })\r\n        }\r\n      })\r\n    },\r\n    uniqueUserName (value) {\r\n      return new Promise((resolve, reject) => {\r\n        value = value.trim()\r\n\r\n        let roundtripsRef = db.collection('User')\r\n          .where('UserName', '==', value)\r\n          .limit(1)\r\n        roundtripsRef.get()\r\n          .then(snapshot => {\r\n            resolve(snapshot.size === 0 || 'Dieser Name ist bereits vergeben')\r\n          }).catch(function (error) {\r\n            console.log('Error ' + error)\r\n            resolve(null)\r\n          })\r\n      })\r\n    },\r\n    deleteAccount () {\r\n      let context = this\r\n      auth.user().delete().then(function () {\r\n        context.$q.notify({\r\n          color: 'green-4',\r\n          textColor: 'white',\r\n          icon: 'check_circle',\r\n          message: 'Schade, dein Konto wurde gelöscht'\r\n        })\r\n        context.$router.push('/')\r\n      }).catch(function (error) {\r\n        console.log(error)\r\n        if (error.code === 'auth/requires-recent-login') {\r\n          context.$q.notify({\r\n            color: 'red-5',\r\n            textColor: 'white',\r\n            icon: 'error',\r\n            message: 'Bitte melde dich erneut an, bevor du dein Konto löscht'\r\n          })\r\n        } else {\r\n          context.$q.notify({\r\n            color: 'red-5',\r\n            textColor: 'white',\r\n            icon: 'error',\r\n            message: 'Es ist ein Fehler aufgetreten, dein Konto konnte nicht gelöscht werden'\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    auth.authRef().onAuthStateChanged((user) => {\r\n      this.UserDisplayName = auth.user().displayName\r\n      this.UserEmail = auth.user().email\r\n      this.titleImgUrl = auth.user().photoURL\r\n\r\n      let userRef = db.collection('User')\r\n        .where('UserUID', '==', auth.user().uid)\r\n        .limit(1)\r\n      userRef.get()\r\n        .then(snapshot => {\r\n          snapshot.forEach(doc => {\r\n            this.companyProfile = !!doc.data().companyProfile\r\n            if (doc.data().website) this.CompanyWebsite = doc.data().website\r\n            if (doc.data().companyDescription) this.companyDescription = doc.data().companyDescription\r\n          })\r\n        })\r\n    })\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=bba5b648&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}