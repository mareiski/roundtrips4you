{"version":3,"sources":["webpack:///./src/pages/PublicUsers.vue?cfe4","webpack:///src/pages/PublicUsers.vue","webpack:///./src/pages/PublicUsers.vue?0ec3","webpack:///./src/pages/PublicUsers.vue"],"names":[],"mappings":";;;;;;;;;AAAA,0BAA0B,aAAa,0BAA0B,wBAAwB,iBAAiB,4CAA4C,eAAe,qCAAqC,4BAA4B,kEAAkE,oBAAoB,aAAa,iCAAiC,kBAAkB,wBAAwB,KAAK,yBAAyB,6DAA6D,uBAAuB,OAAO,sBAAsB,iBAAiB,OAAO,wCAAwC,YAAY,OAAO,kFAAkF,gDAAgD,OAAO,aAAa,0KAA0K,aAAa,gBAAgB,QAAQ,cAAc,kOAAkO,OAAO,WAAW,eAAe,OAAO,iDAAiD,mBAAmB,qCAAqC,oBAAoB,MAAM,uBAAuB,aAAa,qBAAqB,QAAQ,sBAAsB,mBAAmB,OAAO,gCAAgC,4CAA4C,aAAa,uBAAuB,QAAQ,+BAA+B,qBAAqB,OAAO,cAAc,mBAAmB,OAAO,8BAA8B,cAAc;AAC9uD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqFA;AACA;;AAGA;AACA;AACA,kBADA;AAEA;AACA;AAAA;AAAA;AAAA;AADA;AAFA,GADA;;AAOA;AACA;AACA,eADA;AAEA;AAFA;AAIA,GAZA;;AAaA;AACA;AACA,GAfA;;AAgBA;AACA;AACA;AACA;AACA,oBACA,IADA,CACA;AACA;AACA;AACA,uCADA;AAEA,qCAFA;AAGA,qEAHA;AAIA,iDAJA;AAKA,uCALA;AAMA;AANA;AAQA;AACA;AACA,SAXA;AAYA,OAdA;AAeA,KAnBA;;AAoBA;AACA,8EACA,KADA,CACA,QADA,EACA,IADA,EACA,YADA,EAEA,KAFA,CAEA,QAFA,EAEA,IAFA,EAEA,IAFA;AAGA,0BACA,IADA,CACA;AACA;AACA;AACA,OAJA,EAIA,KAJA,CAIA;AACA;AACA;AACA,OAPA;AAQA,KAhCA;;AAiCA;AACA;AACA;AACA,kDAHA,CAKA;;AACA;AACA;AACA;AACA;AACA,KA3CA;;AA4CA;AACA;AACA;;AA9CA;AAhBA,G;;AC1FqL,CAAgB,iHAAG,EAAC,C;;;;;ACA/G;AAC3B;AACL;;;AAG1D;AAC0F;AAC1F,gBAAgB,8CAAU;AAC1B,EAAE,yCAAM;AACR,EAAE,MAAM;AACR,EAAE,eAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEe,kG","file":"js/publicUser.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"public-users  q-px-lg q-pb-md\"},[_c('q-list',{staticClass:\"rounded-borders\",attrs:{\"bordered\":\"\",\"padding\":\"\"}},[(_vm.showUser)?_c('div',_vm._l((_vm.users),function(user,index){return _c('q-item',{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],key:user,attrs:{\"clickable\":!!user.name},on:{\"click\":function($event){return _vm.$router.push('/benutzerprofil/' + user.userUID)}}},[_c('q-item-section',{attrs:{\"avatar\":\"\",\"top\":\"\"}},[_c('q-avatar',{attrs:{\"color\":\"primary\",\"text-color\":\"white\"}},[_c('img',{attrs:{\"src\":user.image ? user.image : '../statics/dummy-image-landscape-1-150x150.jpg'}})])],1),_c('q-item-section',[_c('q-item-label',{attrs:{\"lines\":\"1\"}},[_vm._v(\"#\"+_vm._s(index + 1)+\" \"+_vm._s(user.name ? user.name : 'Anonymer Nutzer')+\" \"+_vm._s(user.reputation ? '(' + user.reputation + ')' : ''))]),_c('q-item-label',{staticStyle:{\"width\":\"100px\"},attrs:{\"caption\":\"\"}},[_vm._v(\"\\n            \"+_vm._s(user.userSince)+\"\\n            \"),_c('q-tooltip',[_vm._v(\"\\n              Dieser Account wurde am \"+_vm._s(user.userSince)+\" erstellt\\n            \")])],1)],1),(user.name)?_c('q-item-section',{attrs:{\"side\":\"\"}},[_c('q-icon',{attrs:{\"name\":\"keyboard_arrow_right\",\"color\":\"primary\"}})],1):_vm._e()],1)}),1):_c('div',_vm._l((3),function(n){return _c('q-item',{key:n},[_c('q-item-section',{staticStyle:{\"padding\":\"8px 10px\"},attrs:{\"avatar\":\"\",\"top\":\"\"}},[_c('q-skeleton',{attrs:{\"size\":\"40px\",\"type\":\"QAvatar\"}})],1),_c('q-item-section',[_c('q-skeleton',{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{\"width\":\"300px\",\"type\":\"rect\"}}),_c('q-item-label',{attrs:{\"caption\":\"\"}},[_c('q-skeleton',{attrs:{\"width\":\"80px\",\"type\":\"rect\"}})],1)],1)],1)}),1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"public-users  q-px-lg q-pb-md\">\r\n    <q-list\r\n      bordered\r\n      padding\r\n      class=\"rounded-borders\"\r\n    >\r\n      <div v-if=\"showUser\">\r\n        <q-item\r\n          v-for=\"(user, index) in users\"\r\n          :key=\"user\"\r\n          :clickable=\"!!user.name\"\r\n          @click=\"$router.push('/benutzerprofil/' + user.userUID)\"\r\n          v-ripple\r\n        >\r\n          <q-item-section\r\n            avatar\r\n            top\r\n          >\r\n            <q-avatar\r\n              color=\"primary\"\r\n              text-color=\"white\"\r\n            >\r\n              <img :src=\"user.image ? user.image : '../statics/dummy-image-landscape-1-150x150.jpg'\">\r\n            </q-avatar>\r\n          </q-item-section>\r\n\r\n          <q-item-section>\r\n            <q-item-label lines=\"1\">#{{index + 1}} {{user.name ? user.name : 'Anonymer Nutzer'}} {{user.reputation ? '(' + user.reputation + ')' : ''}}</q-item-label>\r\n            <q-item-label\r\n              caption\r\n              style=\"width:100px;\"\r\n            >\r\n              {{ user.userSince }}\r\n              <q-tooltip>\r\n                Dieser Account wurde am {{ user.userSince }} erstellt\r\n              </q-tooltip>\r\n            </q-item-label>\r\n          </q-item-section>\r\n\r\n          <q-item-section\r\n            side\r\n            v-if=\"user.name\"\r\n          >\r\n            <q-icon\r\n              name=\"keyboard_arrow_right\"\r\n              color=\"primary\"\r\n            />\r\n          </q-item-section>\r\n        </q-item>\r\n      </div>\r\n      <div v-else>\r\n        <q-item\r\n          v-for=\"n in 3\"\r\n          :key=\"n\"\r\n        >\r\n          <q-item-section\r\n            avatar\r\n            top\r\n            style=\"padding:8px 10px;\"\r\n          >\r\n            <q-skeleton\r\n              size=\"40px\"\r\n              type=\"QAvatar\"\r\n            />\r\n          </q-item-section>\r\n\r\n          <q-item-section>\r\n            <q-skeleton\r\n              width=\"300px\"\r\n              style=\"margin-bottom:10px;\"\r\n              type=\"rect\"\r\n            />\r\n            <q-item-label caption>\r\n              <q-skeleton\r\n                width=\"80px\"\r\n                type=\"rect\"\r\n              />\r\n            </q-item-label>\r\n          </q-item-section>\r\n        </q-item>\r\n      </div>\r\n    </q-list>\r\n  </div>\r\n</template>\r\n<script>\r\nimport(/* webpackPrefetch: true */ '../css/public-users.less')\r\nimport { db } from '../firebaseInit.js'\r\nimport { date } from 'quasar'\r\n\r\nexport default {\r\n  meta: {\r\n    title: 'Users',\r\n    meta: {\r\n      description: { name: 'description', content: 'Reise selbst planen & zusammenstellen, Reise planen kostenlos & online. Routenplaner und Reiseplaner online mit vielen Tools fÃ¼r deinen Roadtrip' }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      users: [],\r\n      showUser: false\r\n    }\r\n  },\r\n  created () {\r\n    this.getAllUsers()\r\n  },\r\n  methods: {\r\n    getAllUsers () {\r\n      let userRef = db.collection('User')\r\n      let context = this\r\n      userRef.get()\r\n        .then(snapshot => {\r\n          snapshot.forEach(doc => {\r\n            let user = {\r\n              image: doc.data().UserImage,\r\n              name: doc.data().UserName,\r\n              userSince: context.getCreatedAtDate(doc.data().createdAt),\r\n              trustedUser: !!doc.data().TrustedUser,\r\n              userUID: doc.data().UserUID,\r\n              roundtripsEdited: doc.data().RTEdited ? doc.data().RTEdited : 0\r\n            }\r\n            this.users.push(user)\r\n            this.getPublishedRoundtrips(user)\r\n          })\r\n        })\r\n    },\r\n    getPublishedRoundtrips (user) {\r\n      let roundtripsRef = db.collection('Roundtrips')\r\n        .where('UserId', '==', user.userUID)\r\n        .where('Public', '==', true)\r\n      roundtripsRef.get()\r\n        .then(snapshot => {\r\n          let publishedRoundtrips = snapshot.size ? snapshot.size : 0\r\n          this.getReputation(user, publishedRoundtrips)\r\n        }).catch(function (error) {\r\n          console.log(error)\r\n          this.showRoundtrips = true\r\n        })\r\n    },\r\n    getReputation (user, publishedRoundtrips) {\r\n      let publicRT = publishedRoundtrips * 50\r\n      let editedRT = user.roundtripsEdited * 25\r\n      user.reputation = publicRT + editedRT + 100\r\n\r\n      // resort after end of the array\r\n      if (this.users.indexOf(user) === this.users.length - 1) {\r\n        this.users.sort((a, b) => Number(b.reputation) - Number(a.reputation))\r\n        this.showUser = true\r\n      }\r\n    },\r\n    getCreatedAtDate (timeStamp) {\r\n      return date.formatDate(new Date(timeStamp.seconds * 1000), 'DD.MM.YYYY')\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicUsers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicUsers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PublicUsers.vue?vue&type=template&id=33795604&\"\nimport script from \"./PublicUsers.vue?vue&type=script&lang=js&\"\nexport * from \"./PublicUsers.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}