(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[27],{

/***/ "ed0d":
/***/ (function(module, exports) {

module.exports = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2Ny4xODEiIGhlaWdodD0iMzMuNDU1IiB2aWV3Qm94PSIwIDAgNjcuMTgxIDMzLjQ1NSI+DQogIDxnIGlkPSJHcnVwcGVfMSIgZGF0YS1uYW1lPSJHcnVwcGUgMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQ1OC40NDEgLTE1NS4wMDQpIj4NCiAgICA8cGF0aCBpZD0icGF0aDgxNSIgZD0iTTcuOC01MS42QzIuMjY5LTQzLjk3NCwxLjA2My0zNy4xODQsNC4xNDYtMzEuMDhjMy4xNTEsNi4yLDguNDE0LDcuOTQxLDE5LjQ3NSw2LjUwOUExNDcuNzYzLDE0Ny43NjMsMCwwLDAsMzkuNDc3LTI4YzIuOTUtLjc3OSwyLjkxNi0uODcyLDIuMDExLDIuNTg1LS45MzksMy41MTktLjk3MiwzLjg2Mi0uMzY5LDMuNjQ0YTE5LjQ5MiwxOS40OTIsMCwwLDAsMi41NDgtNC4xNDJMNDUuODEyLTI5LjlsMS44NzctLjU2MWMyLjU0OC0uNzQ3LDMuNzIxLTEuMzM5LDMuNzIxLTEuODY5LDAtLjU2MS0xLjY3Ni0uNjIzLTQuNDU4LS4xMjVsLTEuOTExLjMxMS00LjE5LTIuMzY3Yy01LjgzMy0zLjMtNi40LTMuMjctMi41ODEuMTg3YTI1Ljc5NCwyNS43OTQsMCwwLDEsMi45ODMsMi45NTksMzAuMzIzLDMwLjMyMywwLDAsMS0zLjYyLDEuMDI4Yy0xLjkxMS41LTUuNDMsMS40LTcuODQ0LDEuOTkzQzE5LjYzMy0yNS43NTUsMTEuNjIxLTI1LjYsOC4zLTI3Ljk2NmMtMS41MDgtMS4wOS0yLjU0OC0zLjMtMi43NDktNS45NzktLjItMi44LjUzNi01LjEwNywzLjUyLTExLjI0M2E0Mi4xMSw0Mi4xMSwwLDAsMCwyLjMxMy01LjQ1Yy4xNjgtMS4wMjgtLjczNy0zLjAyMS0xLjQ3NS0zLjI3QzkuNzExLTUzLjk3LDguNzcyLTUyLjkxMiw3LjgtNTEuNloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ1NS45NTYgMjEwLjE3NikiIGZpbGw9IiNkMzVmMjYiLz4NCiAgICA8dGV4dCBpZD0idGV4dDkyNyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDcyLjYyMiAxNzEuMjg0KSIgZmlsbD0iIzcwNzA3MCIgZm9udC1zaXplPSIxMCIgZm9udC1mYW1pbHk9IlJhbGV3YXkiPjx0c3BhbiB4PSIwIiB5PSIwIj5Sb3VuZHRyaXBzPC90c3Bhbj48L3RleHQ+DQogICAgPHRleHQgaWQ9InRleHQ5MzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ2Mi4xMzEgMTc5LjAwNCkiIGZpbGw9IiNkMzVmMjYiIGZvbnQtc2l6ZT0iMjEiIGZvbnQtZmFtaWx5PSJTZWdvZVVJLCBTZWdvZSBVSSI+PHRzcGFuIHg9IjAiIHk9IjAiPjQ8L3RzcGFuPjwvdGV4dD4NCiAgICA8dGV4dCBpZD0idGV4dDkzNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDczLjY0MSAxNzguNTAzKSIgZmlsbD0iIzcwNzA3MCIgZm9udC1zaXplPSIxMCIgZm9udC1mYW1pbHk9IlJhbGV3YXkiPjx0c3BhbiB4PSIwIiB5PSIwIj55b3U8L3RzcGFuPjwvdGV4dD4NCiAgPC9nPg0KPC9zdmc+DQo="

/***/ }),

/***/ "f241":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/layouts/MyLayout.vue?vue&type=template&id=176441a1&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-layout',{attrs:{"view":"hhh lpr fFf"}},[_c('div',{ref:"Header",class:{ 'header-hidden': !_vm.showHeader },attrs:{"id":"Header"}},[_c('div',{staticClass:"top-row"},[_c('div',{staticClass:"left-col"},[_c('a',{attrs:{"href":"/"}},[_c('img',{attrs:{"alt":"logo","src":__webpack_require__("ed0d")}})]),_c('span',{staticClass:"beta-span cursor-pointer"},[_vm._v("[beta]\n          "),_c('q-tooltip',{on:{"click":function($event){return $event.show()}}},[_vm._v("\n            Wir befinden uns derzeit in der Beta Phase, deshalb kann es leider noch zu bugs kommen\n          ")])],1)]),_c('div',{staticClass:"right-col"},[_c('router-link',{staticClass:"header-page-link",attrs:{"to":"/"}},[_vm._v("home")]),_c('router-link',{staticClass:"header-page-link",attrs:{"to":"/rundreisen-uebersicht"}},[_vm._v("reisen")]),_c('router-link',{staticClass:"header-page-link",attrs:{"to":"/blog"}},[_vm._v("blog")]),(!_vm.user && !this.$store.getters['demoSession/isInDemoSession'])?_c('router-link',{staticClass:"header-page-link",attrs:{"to":"/login"}},[_vm._v("anmelden")]):_vm._e(),(!_vm.user && _vm.getActionButtonText())?_c('router-link',{staticClass:"flex justify-center register-header-link",staticStyle:{"flex-direction":"column","text-decoration":"none"},attrs:{"to":_vm.getActionButtonLink()}},[_c('q-btn',{attrs:{"color":"primary"}},[_vm._v(_vm._s(_vm.getActionButtonText()))])],1):(_vm.user)?_c('q-avatar',{staticStyle:{"width":"50px","margin":"auto 10px auto 10px"},style:(_vm.user ? 'padding:0;' : 'font-size:60px;'),attrs:{"size":"50px","icon":_vm.user && _vm.user.photoURL !== null ? null : 'account_circle'},on:{"click":function($event){[_vm.user ? null : _vm.$router.push('/login'), _vm.showWelcomeTooltip = false]}}},[_c('q-badge',{staticStyle:{"top":"-1px","right":"-3px","width":"auto"},attrs:{"color":"primary","floating":""}},[_vm._v(_vm._s(_vm.undreadNotifications))]),(_vm.user && _vm.user.photoURL !== null)?_c('img',{attrs:{"src":_vm.user.photoURL}}):_vm._e(),_c('div',{staticStyle:{"pointer-events":"none"}},[(!_vm.user || _vm.user.displayName)?_c('q-tooltip',{attrs:{"self":"center middle","anchor":"center middle","value":_vm.showWelcomeTooltip,"content-style":"font-size: 14px;","content-class":"tooltip"}},[_vm._v("\n              "+_vm._s(_vm.user ? 'Hallo, ' + _vm.user.displayName : 'Anmelden')+"\n            ")]):_vm._e()],1),(_vm.user)?_c('q-menu',[_c('q-list',{staticStyle:{"min-width":"100px"}},[_c('q-item',{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"clickable":""},on:{"click":function($event){return _vm.$router.push('/profil')}}},[_c('q-item-section',[_vm._v("\n                  Profil\n                ")])],1),_c('q-item',{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"clickable":""},on:{"click":function($event){return _vm.$router.push('/meine-rundreisen')}}},[_c('q-item-section',[_vm._v("\n                  Meine Reisen\n                ")])],1),_c('q-item',{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"clickable":""},on:{"click":function($event){[_vm.drawer = !_vm.drawer, _vm.markAllMessagesSeen()]}}},[_c('q-item-section',[_c('span',[_vm._v("Nachrichten\n                    "),_c('q-badge',{staticStyle:{"top":"4px","right":"7px"},attrs:{"color":"primary","floating":""}},[_vm._v(_vm._s(_vm.undreadNotifications))])],1)])],1),_c('q-item',{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"clickable":""}},[_c('q-item-section',{on:{"click":_vm.logOut}},[_vm._v("Logout")])],1)],1)],1):_vm._e()],1):_vm._e(),_c('div',{attrs:{"id":"BurgerMenu"}},[_c('svg',{ref:"svg",staticClass:"ham hamRotate ham7",attrs:{"viewBox":"0 0 100 100","width":"80"},on:{"click":function($event){[_vm.$refs.svg.classList.toggle('active'), _vm.$refs.Header.classList.toggle('active')]}}},[_c('path',{staticClass:"line top",attrs:{"d":"m 70,33 h -40 c 0,0 -6,1.368796 -6,8.5 0,7.131204 6,8.5013 6,8.5013 l 20,-0.0013"}}),_c('path',{staticClass:"line middle",attrs:{"d":"m 70,50 h -40"}}),_c('path',{staticClass:"line bottom",attrs:{"d":"m 69.575405,67.073826 h -40 c -5.592752,0 -6.873604,-9.348582 1.371031,-9.348582 8.244634,0 19.053564,21.797129 19.053564,12.274756 l 0,-40"}})]),_c('div',{attrs:{"id":"MobileMenu"}})])],1)]),_c('div',{staticClass:"bottom-row"},[_c('div',{on:{"click":function($event){return _vm.hideMenu()}}},[_c('router-link',{staticClass:"mobile-header-page-link",attrs:{"to":"/"}},[_vm._v("home")])],1),_c('div',{on:{"click":function($event){return _vm.hideMenu()}}},[_c('router-link',{staticClass:"mobile-header-page-link",attrs:{"to":"/rundreisen-uebersicht"}},[_vm._v("reisen")])],1),_c('div',{on:{"click":function($event){return _vm.hideMenu()}}},[_c('router-link',{staticClass:"mobile-header-page-link",attrs:{"to":"/blog"}},[_vm._v("blog")])],1),_c('div',{staticClass:"flex justify-end",on:{"click":function($event){return _vm.hideMenu()}}},[(!_vm.user)?_c('router-link',{staticClass:"mobile-header-page-link",attrs:{"to":"/login"}},[_vm._v("anmelden")]):_vm._e(),(!_vm.user)?_c('router-link',{staticClass:"flex justify-center",staticStyle:{"flex-direction":"column","text-decoration":"none","margin-right":"5px"},attrs:{"to":"/registrieren"}},[_c('q-btn',{attrs:{"color":"primary"}},[_vm._v("registrieren")])],1):_vm._e()],1)])]),(_vm.user)?_c('q-drawer',{attrs:{"width":300,"breakpoint":500,"side":"right","overlay":"","bordered":"","content-class":"bg-grey-3"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:"drawer"}},[_c('q-toolbar',{staticClass:"bg-primary text-white"},[_c('q-toolbar-title',[_vm._v("\n        Benachrichtigungen\n      ")]),_c('q-btn',{attrs:{"flat":"","round":"","dense":"","icon":"close"},on:{"click":function($event){_vm.drawer = false}}})],1),_c('q-scroll-area',{staticClass:"fit"},_vm._l((_vm.messages),function(message){return _c('router-link',{key:message.id,staticStyle:{"text-decoration":"none"},attrs:{"to":message.Link}},[_c('q-card',{staticClass:"notification-card cursor-pointer"},[_c('q-card-section',{staticClass:"created-at"},[_vm._v("\n            "+_vm._s(_vm.getStringDateFromTimestamp(message.createdAt))+"\n          ")]),_c('q-card-section',{staticClass:"message"},[_vm._v("\n            "+_vm._s(message.Message)+"\n          ")]),_c('q-card-section',{staticClass:"tag"},[_c('q-icon',{staticStyle:{"font-size":"16px"},attrs:{"name":message.Icon,"color":"primary"}}),_vm._v(" "+_vm._s(message.Tag)+"\n          ")],1)],1)],1)}),1)],1):_vm._e(),(!_vm.isOnNetlifyPage)?_c('q-page-container',[_c('router-view')],1):_vm._e(),_c('footer',[_c('div',{staticClass:"main-footer"},[_c('div',{staticClass:"footer-menu"},[_c('h3',{staticClass:"footer-title"},[_vm._v("Menü")]),_c('router-link',{staticClass:"footer-link",attrs:{"to":"/"}},[_vm._v("Home")]),_c('router-link',{staticClass:"footer-link",attrs:{"to":"/rundreisen-uebersicht"}},[_vm._v("Reisen")]),_c('router-link',{staticClass:"footer-link",attrs:{"to":"/blog"}},[_vm._v("Blog")]),_c('router-link',{staticClass:"footer-link",attrs:{"to":"/ueber"}},[_vm._v("Über uns")])],1),_c('div',{staticClass:"footer-infos"},[_c('h3',{staticClass:"footer-title"},[_vm._v("Infos")]),(!_vm.isOnNetlifyPage)?_c('router-link',{staticClass:"footer-link",attrs:{"rel":"nofollow","to":"/faq"}},[_vm._v("FAQs")]):_vm._e(),(!_vm.isOnNetlifyPage)?_c('router-link',{staticClass:"footer-link",attrs:{"rel":"nofollow","to":"/impressum"}},[_vm._v("Impressum")]):_vm._e(),(!_vm.isOnNetlifyPage)?_c('router-link',{staticClass:"footer-link",attrs:{"rel":"nofollow","to":"/haftungsausschluss"}},[_vm._v("Haftungsausschluss")]):_vm._e(),(!_vm.isOnNetlifyPage)?_c('router-link',{staticClass:"footer-link",attrs:{"rel":"nofollow","to":"/datenschutz"}},[_vm._v("Datenschutz")]):_vm._e()],1),_c('div',{staticClass:"footer-contact"},[_c('h3',{staticClass:"footer-title"},[_vm._v("Kontakt")]),(!_vm.isOnNetlifyPage)?_c('a',{staticClass:"footer-link contact-link-box",attrs:{"href":"https://roundtrips4you.de"}},[_c('span',{staticClass:"footer-text"},[_vm._v("roundtrips4you")])]):_vm._e(),_c('a',{staticClass:"footer-link",attrs:{"href":"mailto:hello@roundtrips4you.de"}},[_vm._v("hello@roundtrips4you.de")])]),_c('div',{staticStyle:{"margin-top":"10px"},attrs:{"id":"mc_embed_signup"}},[_c('form',{staticClass:"validate",attrs:{"action":"https://roundtrips4you.us18.list-manage.com/subscribe/post?u=ca8f607f808c8e5a9812aec8f&id=c64c971288","method":"post","id":"mc-embedded-subscribe-form","name":"mc-embedded-subscribe-form","target":"_blank","novalidate":""}},[_c('div',{attrs:{"id":"mc_embed_signup_scroll"}},[_c('label',{staticStyle:{"font-size":"18px"},attrs:{"for":"mce-EMAIL"}},[_vm._v("Newsletter")]),_c('input',{staticClass:"email",attrs:{"type":"email","value":"","name":"EMAIL","id":"mce-EMAIL","placeholder":"Email Adresse","required":""}}),_c('div',{staticStyle:{"position":"absolute","left":"-5000px"},attrs:{"aria-hidden":"true"}},[_c('input',{attrs:{"type":"text","name":"b_ca8f607f808c8e5a9812aec8f_c64c971288","tabindex":"-1","value":""}})]),_c('div',{staticClass:"clear"},[_c('q-btn',{staticStyle:{"margin-top":"5px"},attrs:{"dense":"","type":"submit","value":"Subscribe","name":"subscribe","id":"mc-embedded-subscribe","color":"primary"}},[_vm._v("Anmelden")])],1)])])])]),_c('div',{staticClass:"flex justify-center"},[_c('div',{staticClass:"flex",attrs:{"id":"SocialMediaContainer"}},[_c('q-icon',{staticStyle:{"color":"#1f892f"},attrs:{"name":"fab fa-tripadvisor"},on:{"click":function($event){return _vm.openInNewTab('https://www.tripadvisor.de/Profile/Roundtrips4you')}}}),_c('q-icon',{staticStyle:{"color":"#d73532"},attrs:{"name":"fab fa-pinterest-p"},on:{"click":function($event){return _vm.openInNewTab('https://www.pinterest.de/roundtrips4you/')}}}),_c('q-icon',{staticStyle:{"color":"#C13584"},attrs:{"name":"fab fa-instagram"},on:{"click":function($event){return _vm.openInNewTab('https://www.instagram.com/roundtrips4you/')}}}),_c('q-icon',{staticStyle:{"color":"#3b5999"},attrs:{"name":"fab fa-facebook-f"},on:{"click":function($event){return _vm.openInNewTab('https://www.facebook.com/roundtrips4you/')}}})],1)]),_c('CookieBanner')],1),(_vm.showPreload)?_c('div',{staticClass:"preloadOverlay"}):_vm._e(),_c('back-to-top',{staticStyle:{"z-index":"9600"}},[_c('q-btn',{attrs:{"round":"","color":"primary","icon":"airplanemode_active"}},[_c('q-tooltip',[_vm._v("\n        Nach oben\n      ")])],1)],1),_c('q-dialog',{attrs:{"persistent":"","maximized":"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:(_vm.isOnNetlifyPage),callback:function ($$v) {_vm.isOnNetlifyPage=$$v},expression:"isOnNetlifyPage"}},[_c('q-card',{staticClass:"bg-primary text-white"},[_c('q-card-section',[_c('div',{staticClass:"text-h6"},[_vm._v("Warnung! Du befinest dich nicht auf Roundtrips4you.")])]),_c('q-card-section',{staticClass:"q-pt-none"},[_vm._v("\n        Dies ist eine Website die ausschließlich zum Debugging existiert.\n      ")])],1)],1)],1)}
var staticRenderFns = []


// CONCATENATED MODULE: ./src/layouts/MyLayout.vue?vue&type=template&id=176441a1&

// EXTERNAL MODULE: ./src/firebaseInit.js
var firebaseInit = __webpack_require__("1261");

// EXTERNAL MODULE: ./node_modules/quasar/src/plugins/Loading.js
var Loading = __webpack_require__("f508");

// EXTERNAL MODULE: ./node_modules/quasar/src/utils/date.js
var date = __webpack_require__("bd4c");

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/layouts/MyLayout.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
// import(/* webpackPrefetch: true */ '../css/site.less')



let forEachCalled = false;
let redirected = false;
let messages = [];
/* harmony default export */ var MyLayoutvue_type_script_lang_js_ = ({
  name: 'MyLayout',
  components: {
    CookieBanner: () => __webpack_require__.e(/* import() */ 29).then(__webpack_require__.bind(null, "2042")),
    BackToTop: () => Promise.all(/* import() */[__webpack_require__.e(0), __webpack_require__.e(39)]).then(__webpack_require__.bind(null, "6afc"))
  },

  data() {
    return {
      showPreload: true,
      onLine: navigator.onLine,
      isOnNetlifyPage: false,
      RTId: null,
      drawer: false,
      messages: [],
      showWelcomeTooltip: true,
      undreadNotifications: 0,
      showHeader: true,
      lastScrollPosition: 0
    };
  },

  meta() {
    return {
      title: 'Reiseplaner',
      titleTemplate: title => `${title} | Roundtrips4you - Reise kostenlos planen | Route, Reise zusammenstellen`,
      meta: {
        equiv: {
          'http-equiv': 'Content-Type',
          content: 'text/html; charset=UTF-8'
        }
      }
    };
  },

  computed: {
    user() {
      return this.$store.getters['user/user'];
    }

  },
  methods: {
    logOut() {
      firebaseInit["a" /* auth */].logout(this.$router, this.$store);
    },

    hideMenu() {
      this.$refs.svg.classList.remove('active');
      this.$refs.Header.classList.remove('active');
    },

    getStringDateFromTimestamp(timestamp) {
      const initDate = new Date(timestamp.seconds * 1000);
      return date["b" /* default */].formatDate(initDate, 'DD.MM.YYYY HH:mm');
    },

    openInNewTab(link) {
      window.open(link, '_blank');
    },

    onScroll() {
      const currentScrollPosition = window.pageYOffset || document.documentElement.scrollTop;

      if (currentScrollPosition < 0) {
        return;
      } // Stop executing this function if the difference between
      // current scroll position and last scroll position is less than some offset


      if (Math.abs(currentScrollPosition - this.lastScrollPosition) < 60) {
        return;
      }

      if (window.matchMedia('(max-width: 550px)').matches) this.showHeader = currentScrollPosition < this.lastScrollPosition;
      let stickyEls = document.getElementsByClassName('sticky');

      if (stickyEls.length > 0) {
        if (window.pageYOffset + stickyEls[0].getBoundingClientRect().top >= 350) {
          this.showHeader ? stickyEls[0].classList.remove('at-top') : stickyEls[0].classList.add('at-top');
        } else {
          stickyEls[0].classList.add('at-top');
        }
      }

      this.lastScrollPosition = currentScrollPosition;
    },

    getActionButtonText() {
      if (this.$store.getters['demoSession/isInDemoSession']) {
        let currentRoute = this.$router.currentRoute;
        let isOnWizardPage = currentRoute.fullPath.split('/')[1] === 'rundreisen-wizard';
        if (!isOnWizardPage) return 'reise bearbeiten';
      } else return 'registrieren';
    },

    getActionButtonLink() {
      let currentRoute = this.$router.currentRoute;
      let isOnWizardPage = currentRoute.fullPath === 'rundreisen-wizard';

      if (this.$store.getters['demoSession/isInDemoSession'] && !isOnWizardPage) {
        return '/rundreisen-wizard';
      } else return '/registrieren';
    },

    hideLoading() {
      redirected = false;
      this.showPreload = false;
      Loading["a" /* default */].hide();
    },

    updateOnlineStatus(e) {
      const {
        type
      } = e;
      this.onLine = type === 'online';
    },

    getHost() {
      return location.host;
    },

    leaving() {
      window.addEventListener('beforeunload', event => {
        if (this.user && (document.activeElement.tagName === 'INPUT' || document.activeElement.classList.contains('q-editor__content')) || this.$store.getters['demoSession/isInDemoSession']) {
          // any element is still in focus or user is in trial mode
          event.returnValue = 'You have unfinished changes!';
        }
      });
    },

    getNotifications() {
      if (firebaseInit["a" /* auth */].user()) {
        let roundtripsRef = firebaseInit["b" /* db */].collection('PushNotifications').orderBy('createdAt', 'desc');
        roundtripsRef.get().then(snapshot => {
          messages = [];
          snapshot.forEach(doc => {
            if (!doc.data().UserUID || doc.data().UserUID === firebaseInit["a" /* auth */].user().uid) {
              let index = messages.push(doc.data()) - 1;
              messages[index].id = doc.id;
            }
          });
          this.messages = messages;
          this.setUnreadNotifications();
        });
      }
    },

    setUnreadNotifications() {
      let userRef = firebaseInit["b" /* db */].collection('User').where('UserUID', '==', firebaseInit["a" /* auth */].user().uid).limit(1);
      userRef.get().then(snapshot => {
        snapshot.forEach(doc => {
          let count = 0;
          this.messages.forEach(message => {
            if (message.UserUID && !message.AlreadySeen || message.SeenUsers && !Array.from(message.SeenUsers).includes(firebaseInit["a" /* auth */].user().uid)) {
              if (doc.data().createdAt < message.createdAt) count++;
            }
          });
          this.undreadNotifications = count;
        });
      }).catch(ex => {
        console.log(ex);
      });
    },

    // getDateFromTimestamp (timestamp) {
    //   return new Date(timestamp.seconds * 1000)
    // },
    markAllMessagesSeen() {
      let context = this;
      this.messages.forEach(message => {
        if (message.UserUID && !message.AlreadySeen) {
          firebaseInit["b" /* db */].collection('PushNotifications').doc(message.id).update({
            'AlreadySeen': true
          }).then(results => {
            if (context.undreadNotifications !== 0) context.undreadNotifications--;
          }).catch(ex => {
            console.log(ex);
          });
        } else if (message.SeenUsers && !message.SeenUsers.includes(firebaseInit["a" /* auth */].user().uid)) {
          let updatedSeenUsers = Array.from(message.SeenUsers);
          updatedSeenUsers.push(firebaseInit["a" /* auth */].user().uid);
          firebaseInit["b" /* db */].collection('PushNotifications').doc(message.id).update({
            'SeenUsers': updatedSeenUsers
          }).then(results => {
            if (context.undreadNotifications !== 0) context.undreadNotifications--;
          }).catch(ex => {
            console.log(ex);
          });
        }
      });
    }

  },
  watch: {
    onLine(v) {
      if (v) {
        this.$q.notify({
          color: 'green-4',
          textColor: 'white',
          icon: 'check_circle',
          message: 'Verbindung wiederhergestellt'
        });
      } else {
        this.$q.notify({
          color: 'red-5',
          textColor: 'white',
          icon: 'error',
          message: 'Bitte überprüfe deine Internetverbindung'
        });
      }
    }

  },

  mounted() {
    window.addEventListener('online', this.updateOnlineStatus);
    window.addEventListener('offline', this.updateOnlineStatus);
    window.addEventListener('scroll', this.onScroll);
  },

  beforeDestroy() {
    window.removeEventListener('online', this.updateOnlineStatus);
    window.removeEventListener('offline', this.updateOnlineStatus);
    window.removeEventListener('scroll', this.onScroll);
  },

  created() {
    this.leaving();
    this.$storyblok.init({
      accessToken: 'TQjWhoJBE25KdjlauQ5rYgtt'
    });
    this.isOnNetlifyPage = this.getHost() === 'roundtrips4you.netlify.app' || this.getHost() === 'www.roundtrips4you.netlify.app'; // redirect user to roundtrips4you.de if on netlify page

    if (this.isOnNetlifyPage) {
      this.showWelcomeTooltip = false;
      window.location.replace('https://roundtrips4you.de');
    }

    firebaseInit["a" /* auth */].authRef().onAuthStateChanged(user => {
      this.$router.beforeEach((to, from, next) => {
        let loggedIn = firebaseInit["a" /* auth */].user() !== null; // let verified = auth.user() ? auth.user().emailVerified : false

        forEachCalled = true;
        let requireAuth = to.matched.some(record => record.meta.requireAuth);
        let guestOnly = to.matched.some(record => record.meta.guestOnly);
        let isOnLoginPage = to.path === '/login';
        let isOnRoundtripsPage = to.path === '/meine-rundreisen';
        if (!isOnLoginPage && requireAuth && !loggedIn) next('login');else if (!isOnRoundtripsPage && guestOnly && loggedIn) next('meine-rundreisen');else next();
        redirected = true;
      });

      if (!forEachCalled) {
        let loggedIn = firebaseInit["a" /* auth */].user() !== null;
        let currentRoute = this.$router.currentRoute;
        let requireAuth = currentRoute.matched.some(record => record.meta.requireAuth);
        let guestOnly = currentRoute.matched.some(record => record.meta.guestOnly);
        let isOnLoginPage = currentRoute.fullPath === '/login';
        let isOnRoundtripsPage = currentRoute.fullPath === '/meine-rundreisen';
        if (!isOnLoginPage && requireAuth && !loggedIn) this.$router.replace('login');else if (!isOnRoundtripsPage && guestOnly && loggedIn) this.$router.replace('meine-rundreisen');
        redirected = true;
      }

      this.getNotifications();

      if (redirected) {
        redirected = false;
        this.showPreload = false;
        Loading["a" /* default */].hide();
      }
    });
  }

});
// CONCATENATED MODULE: ./src/layouts/MyLayout.vue?vue&type=script&lang=js&
 /* harmony default export */ var layouts_MyLayoutvue_type_script_lang_js_ = (MyLayoutvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__("2877");

// CONCATENATED MODULE: ./src/layouts/MyLayout.vue





/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  layouts_MyLayoutvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  null,
  null,
  null
  
)

/* harmony default export */ var MyLayout = __webpack_exports__["default"] = (component.exports);

/***/ })

}]);
//# sourceMappingURL=27.js.map